(()=>{"use strict";var t={729:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(601),r=n.n(o),i=n(314),a=n.n(i)()(r());a.push([t.id,".caramel-banner{max-width:max-content;max-height:max-content}.caramel-banner:has(div[id*=_custom]){position:relative;overflow:hidden}.caramel-banner>div.caramel--hidden{position:absolute !important;opacity:0;visibility:hidden;pointer-events:none}.caramel-bottomLine{position:fixed;left:0;right:0;bottom:0;opacity:0;pointer-events:none;z-index:9998;font-family:sans-serif !important;transform:translateY(100%);transition-duration:.7s;transition-property:transform,opacity;transition-timing-function:ease-in-out}.caramel-bottomLine.open{opacity:1;pointer-events:all;transform:translateY(0%)}.caramel-bottomLine__inner{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.caramel-bottomLine__inner>div{opacity:1;visibility:visible;margin:0 auto;transition:opacity .3s ease-in}.caramel-bottomLine__inner>div.caramel--hidden{position:absolute !important;left:-9999px;opacity:0;visibility:hidden;pointer-events:none}.caramel-bottomLine__toggle{display:flex;align-items:center;justify-content:center;cursor:pointer;top:-25px;width:50px;height:25px;position:absolute;font-size:16px !important;border-top-left-radius:5px;border-top-right-radius:5px}.caramel-bottomLine__toggle--right{right:0px}.caramel-bottomLine__toggle--left{left:0px}.caramel-bottomLine__toggle svg{width:20px;height:20px}.caramel-combo{max-width:max-content;max-height:max-content}.caramel-cube{display:flex;align-items:center;justify-content:center;transform:scale(0.8);max-width:max-content}.caramel-cube.rotating{animation-duration:1s;animation-name:Caramel_CubeScale;animation-timing-function:linear}.caramel-cube__sides{position:relative;transform-style:preserve-3d;transition-duration:1s;transition-property:transform;transition-timing-function:linear;animation-timing-function:linear;animation-iteration-count:infinite}.caramel-cube__side{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;overflow:hidden;box-sizing:border-box}.caramel-cube__side>div{width:100%;height:100%}@keyframes Caramel_CubeScale{0%{transform:scale(0.8)}50%{transform:scale(48%)}100%{transform:scale(0.8)}}.caramel-fadeInBox{position:fixed;z-index:9998;opacity:0;pointer-events:none;font-family:sans-serif !important;transition-duration:.5s;transition-property:opacity;transition-timing-function:linear}.caramel-fadeInBox.open{opacity:1;pointer-events:all}.caramel-fadeInBox__inner{display:flex;align-items:center;flex-direction:column;justify-content:center;box-sizing:border-box;overflow:hidden;width:100%;height:100%;background-color:rgba(0,0,0,0)}.caramel-fadeInBox__inner [id^=yandex_rtb_]{max-width:300px}.caramel-fadeInBox__inner:has(div[id*=_custom]){position:relative}.caramel-fadeInBox__inner>div.caramel--hidden{opacity:0;visibility:hidden;pointer-events:none;position:absolute !important}.caramel-fadeInBox__close{cursor:pointer;display:flex;align-items:center;justify-content:center;width:50px;height:25px;position:absolute;overflow:hidden;color:#fff}.caramel-fadeInBox__close svg{width:20px;height:20px}.caramel-fadeInBox__close--tl{top:0;left:0;transform:translate(0, -100%);border-top-left-radius:5px;border-top-right-radius:5px}.caramel-fadeInBox__close--tr{top:0;right:0;transform:translate(0, -100%);border-top-left-radius:5px;border-top-right-radius:5px}.caramel-fadeInBox__close--bl{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.caramel-fadeInBox__close--br{right:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.caramel-freeze{position:static !important;overflow:hidden !important;transform:unset !important}.caramel-fullscreen{position:fixed;top:0;left:0;z-index:2147483647 !important;width:100vw !important;height:100vh !important;font-family:sans-serif !important;opacity:0;visibility:hidden;transition:opacity 1s ease,visibility 1s}.caramel-fullscreen.open{opacity:1;visibility:visible}.caramel-fullscreen__wrapper{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.caramel-fullscreen__load-bar{display:flex;width:100%;position:absolute;top:0;left:0}.caramel-fullscreen__load-bar__text{font-family:sans-serif;cursor:pointer;position:absolute;top:0;right:0;z-index:9999 !important;display:flex;align-items:center;justify-content:center;width:30px;height:100%;color:#fff;font-size:16px}.caramel-fullscreen__load-bar__text svg{width:24px;height:24px}.caramel-fullscreen__load-bar__line{width:100%;height:100%}.caramel-fullscreen__load-bar__line.active .caramel-fullscreen__load-bar__progress{width:100%}.caramel-fullscreen__load-bar__progress{width:0;height:100%;transition-property:width;transition-timing-function:linear}.caramel-fullscreen__close{width:20px}[data-fullscreen-element-name=close-btn]>div:not(:nth-child(1)){display:none !important}[data-fullscreen-element-name=close-btn]:has(.caramel-fullscreen__customClose){pointer-events:none !important}.caramel-fullscreen__customClose{display:flex !important;align-items:center !important;justify-content:center !important;color:#949cb0 !important;font-size:16px !important}@media screen and (min-width: 768px){.caramel-fullscreen__customClose{font-size:18px !important;width:40px !important;height:40px !important}}.caramel-interscroller{position:relative;overflow:hidden;width:100%}@media screen and (max-width: 600px){.caramel-interscroller{width:100vw;margin-left:calc((100vw - 100%)/-2)}}.caramel-interscroller__inner{position:absolute;top:0;left:0;width:100%;height:100%;clip:rect(0, auto, auto, 0)}@media screen and (-webkit-min-device-pixel-ratio: 0){.caramel-interscroller__inner{-webkit-mask-image:-webkit-linear-gradient(top, #ffffff 0%, #ffffff 100%)}}.caramel-interscroller__banner{display:flex;align-items:center;justify-content:center;position:fixed;overflow-y:scroll;top:50%;left:50%;width:100%;height:100%;transform:translateZ(0) translate(-50%, -50%);-webkit-transform:translateZ(0) translate(-50%, -50%)}.caramel-interscroller__banner>div{opacity:1;visibility:visible;margin:0 auto;transition:opacity .3s ease-in}.caramel-interscroller__banner>div.caramel--hidden{position:absolute !important;left:-9999px;opacity:0;visibility:hidden;pointer-events:none}.caramel-smartCatfish__item{position:fixed;left:0;z-index:9998 !important;display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;transition-duration:.5s;transition-property:transform;transition-timing-function:ease-in-out}.caramel-smartCatfish__item--top{top:0;transform:translateY(-100%)}.caramel-smartCatfish__item--top.active{transform:translateY(0)}.caramel-smartCatfish__item--bottom{bottom:0;transform:translateY(100%)}.caramel-smartCatfish__item--bottom.active{transform:translateY(0)}.caramel-smartSticky{position:fixed;top:50%;z-index:9998;color:#000;font-family:sans-serif !important;transition-duration:.7s;transition-property:transform;transition-timing-function:ease-in-out}.caramel-smartSticky--left{left:0;transform:translateX(-100%) translateY(-50%)}.caramel-smartSticky--left .caramel-smartSticky__toggle{right:-40px}.caramel-smartSticky--left .caramel-smartSticky__toggle svg{transform:rotate(-90deg)}.caramel-smartSticky--left.open{transform:translateX(0) translateY(-50%)}.caramel-smartSticky--left.open .caramel-smartSticky__toggle{right:0}.caramel-smartSticky--left.open .caramel-smartSticky__toggle svg{transform:rotate(90deg)}.caramel-smartSticky--right{right:0;transform:translateX(100%) translateY(-50%)}.caramel-smartSticky--right .caramel-smartSticky__toggle{left:-40px}.caramel-smartSticky--right .caramel-smartSticky__toggle svg{transform:rotate(90deg)}.caramel-smartSticky--right.open{transform:translateX(0) translateY(-50%)}.caramel-smartSticky--right.open .caramel-smartSticky__toggle{left:0}.caramel-smartSticky--right.open .caramel-smartSticky__toggle svg{transform:rotate(-90deg)}.caramel-smartSticky__toggle{display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer;width:30px;height:30px;font-size:16px;color:#fff;position:absolute;border-radius:50%;transition-property:all;transition-duration:.7s;transition-timing-function:ease-in-out}.caramel-smartSticky__toggle--top{top:-40px}.caramel-smartSticky__toggle--bottom{bottom:-40px}.caramel-smartSticky__toggle svg{width:20px;height:20px;transition-duration:.3s;transition-property:transform;transition-timing-function:linear}.caramel-story{position:relative;cursor:pointer;max-width:max-content;font-family:sans-serif}.caramel-story--sticky{position:fixed;box-shadow:rgba(0,0,0,.25) 0px 3px 8px;border-radius:5px}.caramel-story--sticky .caramel-story__wrapper{padding:15px}.caramel-story__wrapper:hover .caramel-story__progress__item{animation-play-state:paused}.caramel-story .paused{animation-play-state:paused}.caramel-story__close{display:flex;align-items:center;justify-content:center;border-radius:50%;width:30px;height:30px;position:absolute;z-index:2;color:#fff;background-color:gray;box-shadow:rgba(0,0,0,.25) 0px 3px 8px}.caramel-story__close--tl{top:0;left:0;transform:translate(-100%, -100%)}.caramel-story__close--tr{top:0;right:0;transform:translate(100%, -100%)}.caramel-story__close--bl{left:0;bottom:0;transform:translate(-100%, 100%)}.caramel-story__close--br{right:0;bottom:0;transform:translate(100%, 100%)}.caramel-story__close svg{width:24px;height:24px}.caramel-story__progress{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-bottom:10px;gap:5px}.caramel-story__progress__item{flex-grow:1;margin:0 2px;border-radius:3px;background-size:200%;background-repeat:no-repeat;background-position:100% 50%;animation-delay:.1s;animation-timing-function:linear}.caramel-story__progress__item.active{animation-name:Caramel_StoryLoader}.caramel-story__progress__item.passed{background-position:0 0}.caramel-story__banners{position:relative}.caramel-story__banners .caramel-story__banner{visibility:hidden;opacity:0;position:absolute;bottom:0;z-index:-1;width:100%;transition:opacity 1s ease,visibility 1s}.caramel-story__banners .caramel-story__banner.active{position:relative;visibility:visible;opacity:1;z-index:3}@keyframes Caramel_StoryLoader{0%{background-position:100% 0}100%{background-position:0 0}}.caramel-topLine{position:fixed;top:0;left:0;right:0;opacity:0;pointer-events:none;z-index:9998;font-family:sans-serif !important;transform:translateY(-100%);transition-duration:.7s;transition-property:transform,opacity;transition-timing-function:ease-in-out}.caramel-topLine.open{opacity:1;pointer-events:all;transform:translateY(0%)}.caramel-topLine__inner{display:flex;align-items:center;justify-content:center}.caramel-topLine__toggle{display:flex;align-items:center;justify-content:center;cursor:pointer;bottom:-25px;width:50px;height:25px;color:#fff;position:absolute;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.caramel-topLine__toggle--right{right:0px}.caramel-topLine__toggle--left{left:0px}.caramel-topLine__toggle svg{width:20px;height:20px}.caramel-videoOverlay{position:relative;max-width:max-content;max-height:max-content;font-family:sans-serif !important}.caramel-videoOverlay__background{position:absolute;inset:0;z-index:10;cursor:pointer}.caramel-videoOverlay__banner{position:absolute;left:50%;z-index:20;transform:translateX(-50%);transition-duration:.5s;transition-property:opacity;transition-timing-function:linear;opacity:0;pointer-events:none}.caramel-videoOverlay__banner.open{opacity:1;pointer-events:all !important}.caramel-videoOverlay__close{display:flex;align-items:center;justify-content:center;cursor:pointer;top:-25px;width:50px;height:25px;color:#fff;position:absolute;border-top-left-radius:5px;border-top-right-radius:5px}.caramel-videoOverlay__close--right{right:0px}.caramel-videoOverlay__close--left{left:0px}.caramel-videoOverlay__close svg{width:20px;height:20px}.caramel-streamLine{margin:0 auto;position:relative;font-family:sans-serif !important}.caramel-streamLine--stickyAlways,.caramel-streamLine--stickyOnScroll.active{position:fixed;z-index:9998}.caramel-streamLine--closed{opacity:0;pointer-events:none}@supports selector(.caramel-streamLine:has(*)){.caramel-streamLine:not(:has(.caramel-streamLine__block[data-state=filled])){opacity:0;pointer-events:none}}@supports selector(.caramel-streamLine:has(*)){.caramel-streamLine:has(.caramel-streamLine__block[data-state=filled]):not(:has(.caramel-streamLine__block[data-state=filled] *)){opacity:0;pointer-events:none}}.caramel-streamLine__inner{position:relative;overflow:hidden;width:100%;height:100%}.caramel-streamLine__block{position:relative;inset:0;width:100%;height:100%;background-color:#fff;opacity:1;pointer-events:auto;z-index:1}.caramel-streamLine__block[data-state=empty]{position:absolute;opacity:0;pointer-events:none;z-index:0}.caramel-streamLine__close{cursor:pointer;display:flex;align-items:center;justify-content:center;width:50px;height:25px;position:absolute;overflow:hidden;color:#fff}.caramel-streamLine__close svg{width:20px;height:20px}.caramel-streamLine__close--tl{top:0;left:0;transform:translate(0, -100%);border-top-left-radius:5px;border-top-right-radius:5px}.caramel-streamLine__close--tr{top:0;right:0;transform:translate(0, -100%);border-top-left-radius:5px;border-top-right-radius:5px}.caramel-streamLine__close--bl{left:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.caramel-streamLine__close--br{right:0;bottom:0;transform:translate(0, 100%);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.caramel-infobox{position:absolute;top:0;left:0;z-index:2147483647;color:#fff;background-color:rgba(0,0,0,.75);padding:2px 10px;font-size:12px;white-space:nowrap;font-family:sans-serif}.caramel-infobox--vast{top:auto;bottom:0}div[id^=Caramel_VideoAd]{position:absolute;inset:0;z-index:10;background-color:#212121}[caramel-id]:has([id^=Caramel_VideoAd]){position:relative}[caramel-id] a.vast-blocker{z-index:10}",""]);const s=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},a=[],s=0;s<t.length;s++){var c=t[s],l=o.base?c[0]+o.base:c[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var p=n(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var f=r(m,o);o.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=n(i[a]);e[s].references--}for(var c=o(t,r),l=0;l<i.length;l++){var d=n(i[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=c}}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var o=["roxot","betweenDigital"],r={fullscreen:"fullscreen",banner:"banner",interscroller:"interscroller",fadeInBox:"fadeInBox",combo:"combo",topLine:"topLine",bottomLine:"bottomLine",smartCatfish:"smartCatfish",smartSticky:"smartSticky",cube:"cube",story:"story",videoOverlay:"videoOverlay",streamLine:"streamLine"},i=[r.banner,r.interscroller,r.story],a=[r.bottomLine,r.topLine,r.smartCatfish,r.smartSticky,r.story,r.interscroller],s=[r.fullscreen],c=[r.topLine,r.bottomLine,r.fadeInBox],l="dc-feed",d=n(72),u=n.n(d),p=n(825),m=n.n(p),f=n(659),h=n.n(f),v=n(56),y=n.n(v),b=n(540),w=n.n(b),g=n(113),_=n.n(g),C=n(729),E={};E.styleTagTransform=_(),E.setAttributes=y(),E.insert=h().bind(null,"head"),E.domAPI=m(),E.insertStyleElement=w();u()(C.A,E);C.A&&C.A.locals&&C.A.locals;var x=25;const S=function(){function t(){this.eventHandlers={}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.on=function(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)},t.prototype.once=function(t,e){var n=this,o=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];e.apply(void 0,r),n.removeListener(t,o)};this.on(t,o)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this.eventHandlers[t];o&&o.forEach((function(t){return t.apply(void 0,e)}))},t.prototype.removeListener=function(t,e){var n=this.eventHandlers[t];n&&(this.eventHandlers[t]=n.filter((function(t){return t!==e})))},t.prototype.removeAllListeners=function(t){delete this.eventHandlers[t]},t}();var A={0:"Unknown error.",1:"No bid or response.",2:"Incorrect response.",3:"Timeout.",4:"HTTP error.",5:"Incorrect user data in the configuration script.",6:"Incorrect monetizer settings.",7:"The container ID received from the monetizer differs from the ID listed in the request.",8:"A correct response with no status is received from the monetizer.",9:"The monetizer's response has no or an incorrect CodeType."},I={default:"default",benchmark:"benchmark"};const L=function(){function t(){}return t.appendElement=function(t,e,n){var o=document.createElement(t);if(document.querySelector(n)){if(e)for(var r in e)o.setAttribute(r,e[r]);return document.querySelector(n).appendChild(o),o}},t}();const T={colors:{info:"#0986E6",error:"#E31A10",success:"#0FFC03",warning:"#E69509"}};var z=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};const k=function(){function t(){}return t.success=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log.apply(console,z(["%c [".concat(t,"]"),"color: ".concat(T.colors.success)],e,!1))},t.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log.apply(console,z(["%c [".concat(t,"]"),"color: ".concat(T.colors.error)],e,!1))},t.info=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log.apply(console,z(["%c [".concat(t,"]"),"color: ".concat(T.colors.info)],e,!1))},t.warning=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log.apply(console,z(["%c [".concat(t,"]"),"color: ".concat(T.colors.warning)],e,!1))},t.group=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];console.group.apply(console,z(["%c [".concat(t,"]"),"color: ".concat(T.colors[e])],n,!1))},t.groupEnd=function(){console.groupEnd()},t}();const O=function(){function t(){}return t.format=function(e){var n=e/1e3,o=Math.floor(n/60),r=Math.floor(n%60),i=Math.ceil(n%1*1e3),a=t.padZero(o),s=t.padZero(r),c=t.padZero(i,3);return"".concat(a,":").concat(s,".").concat(c)},t.padZero=function(t,e){return void 0===e&&(e=2),String(t).padStart(e,"0")},t}();var B=function(){return B=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},B.apply(this,arguments)},P=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};const j=function(){function t(){this.mode="default"}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.on=function(){D.get("logger")?k.info("LOGGER","Is already enabled"):(D.save("logger",!0),window.Ya.enableAdConsole(),k.info("LOGGER","Enabled. Refresh the page to see the logs"))},t.prototype.off=function(){D.get("logger")?(D.remove("logger"),localStorage.removeItem("adfoxDebugConsoleEnabled"),k.info("LOGGER","Disabled")):k.info("LOGGER","Is already disabled")},t.prototype.setMode=function(t){this.mode===t?k.info("LOGGER",'Is already in "'.concat(t,'" mode')):Object.values(I).includes(t)?(D.save("loggerMode",t),k.info("LOGGER",'Mode has been set to "'.concat(t,'"'))):k.error("LOGGER",'Unknown mode: "'.concat(t,'"'))},t.prototype.init=function(){var t=this;window.Caramel.Logger={on:this.on,off:this.off,setMode:this.setMode},window.addEventListener("keydown",(function(e){e.ctrlKey&&e.altKey&&"l"===e.key.toLowerCase()&&(D.get("logger")?t.off():t.on(),window.location.reload(),e.preventDefault())}));var e=D.get("logger");this.mode=D.get("loggerMode")||"default",e&&(k.info("LOGGER","Logger is enabled in mode:",this.mode),window.Caramel.EventEmitter.on("debug",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k.info.apply(k,P(["DEBUG"],t,!1))})),"benchmark"===this.mode&&(window.Caramel.EventEmitter.on("benchmark:log",(function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return k.info.apply(k,P(["BENCHMARK","".concat(e," | ").concat(O.format(t))],n,!1))})),window.Caramel.EventEmitter.on("benchmark:error",(function(t){return k.error("BENCHMARK",t)}))),window.Caramel.EventEmitter.on("app:websiteConfigConnectSuccess",(function(){return k.success("APP","Website config has been connected")})),window.Caramel.EventEmitter.on("app:websiteConfigConnectError",(function(){return k.error("APP","Failed to connect website config")})),window.Caramel.EventEmitter.on("yandex:headerBiddingScriptConnectSuccess",(function(){return k.success("YANDEX","HB script successfully initialized")})),window.Caramel.EventEmitter.on("yandex:headerBiddingScriptConnectError",(function(){return k.error("YANDEX","Failed to initialize HB script")})),window.Caramel.EventEmitter.on("yandex:contextScriptConnectSuccess",(function(){return k.success("YANDEX","Context script successfully initialized")})),window.Caramel.EventEmitter.on("yandex:contextScriptConnectError",(function(){return k.error("YANDEX","Failed to initialize Context script")})),window.Caramel.EventEmitter.on("yandex:headerBiddingSettingsSetup",(function(t){return k.info("YANDEX","HB settings has been set",t)})),window.Caramel.EventEmitter.on("yandex:headerBiddingBidsReceived",(function(t){return k.info("YANDEX","HB received bids:",t.map((function(t){var e,n=window.Caramel.config.zones.find((function(e){return e.banners.some((function(e){return t.containerId.includes(e.id)}))}));if(!n)return null;var o=!!(null===(e=null==t?void 0:t.cost)||void 0===e?void 0:e.cpm),r=!!(null==t?void 0:t.error);return B(B({zone:n.name,status:o?"Bid":"Failure",bidder:t.adapterName,duration:t.requestDuration},r?{error:Object.values(A)[t.error.code]}:{}),o?{cpm:t.cost.cpm}:{})})).filter(Boolean))})),window.Caramel.EventEmitter.on("prebid:prebidScriptConnectSuccess",(function(){return k.success("PREBID","Prebid script successfully initialized")})),window.Caramel.EventEmitter.on("prebid:prebidScriptConnectError",(function(){return k.error("PREBID","Failed to initialize Prebid script")})),window.Caramel.EventEmitter.on("streamLine:log",(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];k[t].apply(k,P(["STREAMLINE"],e,!1))})),window.Caramel.EventEmitter.on("videoSDK:connectSuccess",(function(){return k.info("VIDEO SDK","Video SDK has been successfully connected")})),window.Caramel.EventEmitter.on("videoSDK:connectError",(function(){return k.error("VIDEO SDK","Failed to connect Video SDK")})),window.Caramel.EventEmitter.on("videoSDK:error",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k.error.apply(k,P(["VIDEO SDK"],t,!1))})),window.Caramel.EventEmitter.on("config:validationError",(function(t){console.error(t)})),window.Caramel.EventEmitter.on("zone:init",(function(t){k.info("ZONE",'"'.concat(t.name,'" successfully initialized'),t)})),window.Caramel.EventEmitter.on("zone:validationError",(function(t){k.group("ZONE: ".concat(t.message),"error"),t.errors.forEach((function(t){return k.error("ZONE",t)})),k.groupEnd()})),window.Caramel.EventEmitter.on("zone:tryToCallVideoAd",(function(t,e){return k.info("ZONE",'"'.concat(t.name,'" trying to call VAST from:'),e)})),window.Caramel.EventEmitter.on("banner:validationError",(function(t){k.group("BANNER: ".concat(t.message),"error"),t.errors.forEach((function(t){return k.error("BANNER",t)})),k.groupEnd()})))},t}();var M="Caramel";const D=function(){function t(){}return t.save=function(t,e){sessionStorage.setItem("".concat(M,"_").concat(t),JSON.stringify(e))},t.get=function(t){var e=sessionStorage.getItem("".concat(M,"_").concat(t));return e?JSON.parse(e):null},t.remove=function(t){sessionStorage.removeItem("".concat(M,"_").concat(t))},t.clear=function(){sessionStorage.clear()},t}();var F=function(t){return new Promise((function(e){return setTimeout(e,t)}))},q=function(t,e){e&&(e.innerHTML=t,e.querySelectorAll("script").forEach((function(t){var e,n=document.createElement("script");Array.from(t.attributes).forEach((function(t){n.setAttribute(t.name,t.value)})),n.text=t.text,null===(e=t.parentNode)||void 0===e||e.replaceChild(n,t)})))},H=function(t){var e={"adfox_yandex_adplay-adv":["p1","p2"],pb_digitalcaramel:["siteId","placementId"],pb_vox:["placement","placementId"],pb_between:["s"],pb_rtbsape:["placeId"]};return e[t.bidder]?e[t.bidder].every((function(e){return t.params[e]&&!!t.params[e]})):!!t.params.placementId},R=function(t){var e,n,o,r,i,a,s,c,l;switch(t.bidder){case"adfox_yandex_adplay-adv":return{p1:null===(e=t.params)||void 0===e?void 0:e.p1,p2:null===(n=t.params)||void 0===n?void 0:n.p2};case"pb_digitalcaramel":return{siteId:null===(o=t.params)||void 0===o?void 0:o.siteId,placementId:null===(r=t.params)||void 0===r?void 0:r.placementId.split(",").at(-1).trim()};case"pb_vox":return{placement:null===(i=t.params)||void 0===i?void 0:i.placement,placementId:null===(a=t.params)||void 0===a?void 0:a.placementId.split(",").at(-1).trim()};case"pb_between":return{s:null===(s=t.params)||void 0===s?void 0:s.s};case"pb_rtbsape":return{placeId:+(null===(c=t.params)||void 0===c?void 0:c.placeId)};default:return{placementId:null===(l=t.params)||void 0===l?void 0:l.placementId.split(",").at(-1).trim()}}},N=function(t){var e="; ".concat(document.cookie).split("; ".concat(t,"="));return 2===e.length&&e.pop().split(";").shift()||null},V=function(t,e,n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),document.cookie="".concat(t,"=").concat(e,";expires=").concat(o.toUTCString(),";path=/")};const Y=function(){function t(t){this.isFeedInView=!1,this.element=null,this.zone=t,c.includes(t.formatType)&&this.setupFeedObservation()}return t.prototype.setupFeedObservation=function(){var t=this,e=document.querySelector(".".concat(l));if(e){var n,o,r,i,a=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(t.isFeedInView||window.Caramel.EventEmitter.emit("format:feedViewEnter"),t.isFeedInView=!0):(t.isFeedInView&&window.Caramel.EventEmitter.emit("format:feedViewLeave"),t.isFeedInView=!1)}))}),{root:null,rootMargin:"0px",threshold:0});this.isFeedInView=(n=document.querySelector(".".concat(l)),o=n.getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,o.bottom>=0&&o.top<=i&&o.right>=0&&o.left<=r),a.observe(e)}},t.prototype.setupResizeObservation=function(){var t=this,e=function(){if(t.element){var e=t.canShowForDevice();t.element.style.transition="none",t.element.style.visibility=e?"visible":"hidden",t.element.offsetHeight,t.element.style.transition=""}};e(),window.addEventListener("resize",e)},t.prototype.canShowForDevice=function(){if(!this.zone.params.isAdaptive)return!0;var t,e=this.zone.params.adaptiveOptions.sizes;return t=window.innerWidth>e.tabletWidth?"desktop":window.innerWidth<=e.tabletWidth&&window.innerWidth>e.phoneWidth?"tablet":"phone",this.zone.params.adaptiveOptions.devices.includes(t)},t}();var U,W=(U=function(t,e){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},U(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),G=function(){return G=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},G.apply(this,arguments)};const K=function(t){function e(e){var n=t.call(this,e)||this;return n.params=G(G({customCode:"",customCodeDelay:15,customCodePriority:!1},e.params),e.formatParams),n}return W(e,t),e.prototype.init=function(){var t=this;this.draw(),this.zone.banners.forEach((function(e,n){e.call({onRender:function(){0===n&&t.start()}})}))},e.prototype.start=function(){var t=this;if(this.params.customCode&&!(this.zone.banners.length>1))if(this.setStep(this.params.customCodePriority?2:1),q(this.params.customCode,document.getElementById("".concat(this.zone.banners[0].containerId,"_custom"))),this.params.customCodePriority){var e=setInterval((function(){t.hasCustomContent()&&(clearInterval(e),setTimeout((function(){t.setStep(1)}),1e3*t.params.customCodeDelay))}),100);setTimeout((function(){t.hasCustomContent()||(clearInterval(e),t.setStep(1))}),3e3)}else setTimeout((function(){t.hasCustomContent()&&t.setStep(2)}),1e3*this.params.customCodeDelay)},e.prototype.hasCustomContent=function(){var t=this.zone.banners[0].containerId,e=!!(document.querySelector("#".concat(t,"_custom iframe"))||document.querySelector("#".concat(t,"_custom img"))||document.querySelector("#".concat(t,"_custom video"))||document.querySelector(".adm-banner-container *")),n=document.querySelector('[id*="traff_container"]'),o=!!n&&n.offsetHeight>x;return e||o},e.prototype.setStep=function(t){Array.from(this.element.querySelectorAll(".caramel-banner > div")).forEach((function(e,n){n===t-1?e.classList.remove("caramel--hidden"):e.classList.add("caramel--hidden")}))},e.prototype.draw=function(){var t,e=!!this.params.customCode&&this.zone.banners.length<=1,n='\n      <div class="caramel-banner">\n        '.concat(this.zone.banners.map((function(t){return'<div id="'.concat(t.containerId,'"></div>')})).join(""),"\n        ").concat(e?'<div id="'.concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'_custom"></div>'):"","\n      </div>\n    ");this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",n),this.element=this.zone.container.querySelector(".caramel-banner"))},e}(Y);const Z={close:'\n    <svg viewBox="0 0 24 24" xmlns="https://www.w3.org/2000/svg">\n      <path fill="currentColor" d="M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4">\n      </path>\n    </svg>\n  ',chevron:'\n    <svg viewBox="0 0 512 512" xmlns="https://www.w3.org/2000/svg">\n      <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="m112 184l144 144l144-144">\n      </path>\n    </svg>\n  '};var X="https://yandex.ru/ads/system/context.js";const J=function(){function t(){}return t.start=function(t){this.timers[t]?window.Caramel.EventEmitter.emit("benchmark:error",'Timer "'.concat(t,'" is already running')):this.timers[t]=performance.now()},t.lap=function(t){if(this.timers[t])return performance.now()-this.timers[t];window.Caramel.EventEmitter.emit("benchmark:error",'Timer "'.concat(t,'" was not started'))},t.end=function(t){if(this.timers[t]){var e=performance.now()-this.timers[t];return delete this.timers[t],e}window.Caramel.EventEmitter.emit("benchmark:error",'Timer "'.concat(t,'" was not started'))},t.timers={},t}();var Q=function(){return Q=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Q.apply(this,arguments)},$=function(){function t(){}return t.initQueues=function(){window.Ya||(window.Ya={}),window.yaContextCb=window.yaContextCb||[],window.Ya.adfoxCode||(window.Ya.adfoxCode={}),window.Ya.adfoxCode.hbCallbacks||(window.Ya.adfoxCode.hbCallbacks=[])},t.connectHeaderBiddingScript=function(){var t=L.appendElement("script",{async:"true",src:"https://yandex.ru/ads/system/header-bidding.js"},"head");t.onload=function(){window.Caramel.headerBiddingScriptConnected=!0,window.Caramel.EventEmitter.emit("benchmark:log",J.lap("app:init"),"HB script successfully initialized"),window.Caramel.EventEmitter.emit("yandex:headerBiddingScriptConnectSuccess")},t.onerror=function(){window.Caramel.EventEmitter.emit("yandex:headerBiddingScriptConnectError")}},t.connectContextScript=function(){if(document.querySelector('script[src="'.concat(X,'"]')))return window.Caramel.contextScriptConnected=!0,void window.Caramel.EventEmitter.emit("yandex:contextScriptConnectSuccess");var t=L.appendElement("script",{async:"true",src:X},"head");t.onload=function(){window.Caramel.contextScriptConnected=!0,window.Caramel.EventEmitter.emit("benchmark:log",J.lap("app:init"),"Context script successfully initialized"),window.Caramel.EventEmitter.emit("yandex:contextScriptConnectSuccess")},t.onerror=function(){window.Caramel.EventEmitter.emit("yandex:contextScriptConnectError")}},t.setupHeaderBiddingSettings=function(t,e,n,o,r){void 0===r&&(r=!1);var i=Object.fromEntries(Object.entries(null!=e?e:{}).filter((function(t){return 1!==t[1]}))),a=Q(Q(Q(Q({},r&&{pbjs:window.pbjs}),{adUnits:n,biddersMap:t}),Object.keys(i).length>0&&{biddersCpmAdjustmentMap:i}),{callbacks:{onBidsReceived:function(t){void 0===t&&(t=[]),window.Caramel.EventEmitter.emit("yandex:headerBiddingBidsReceived",t)}},timeout:o,syncPixels:[{bidder:"betweenDigital",pixels:["https://ads.betweendigital.com/sspmatch?p=42917&r=".concat((new Date).getTime()),"https://ads.betweendigital.com/sspmatch?p=41985&r=".concat((new Date).getTime())]},{bidder:"sape",pixels:["https://acint.net/cmatch/?dp=14&pi=1753819"]},{bidder:"solta",pixels:["https://kimberlite.io/rtb/syncd"]}]});window.YaHeaderBiddingSettings=a,window.Caramel.EventEmitter.emit("yandex:headerBiddingSettingsSetup",a)},t.createAsyncBanner=function(t){window.yaContextCb.push((function(){window.Ya.adfoxCode.create(Q({ownerId:ze.config.adfox.ownerId},t))}))},t.createAdaptiveBanner=function(t,e,n){window.yaContextCb.push((function(){window.Ya.adfoxCode.createAdaptive(Q({ownerId:ze.config.adfox.ownerId},t),e,Q(Q({},n),{isAutoReloads:!1}))}))},t.reloadBanner=function(t,e){void 0===e&&(e=!1),window.Ya.adfoxCode.reload(t,{onlyIfWasVisible:e})},t.reloadAllVisibleBanners=function(){window.Ya.adfoxCode.reload(null,{onlyIfWasVisible:!0})},t.destroyBanner=function(t){window.Ya.adfoxCode.destroy(t)},t.clearSession=function(){window.Ya.adfoxCode.clearSession()},t.getPlatform=function(){return window.innerWidth>768?"desktop":"touch"},t.getLastWinnerBid=function(t){var e,n=window.Ya.headerBidding.getBidsReceived().filter((function(e){return e.containerId===t&&e.hasOwnProperty("cost")})),o=n.reduce((function(t,e){return e.cost.cpm>t.cost.cpm?e:t}),n[0]);return{adapterName:null==o?void 0:o.adapterName,cpm:null===(e=null==o?void 0:o.cost)||void 0===e?void 0:e.cpm}},t}();const tt=$;var et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(){return nt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},nt.apply(this,arguments)};const ot=function(t){function e(e){var n=t.call(this,e)||this;return n.countdownTimer=null,n.countdownLeft=0,n.isManuallyClosed=!1,n.suppressNextDirectFloorAd=!1,n.directFloorAdTimer=null,n.params=nt(nt({isYandex:!1,showAfter:1,canCloseAfter:3,showAfterClose:0,removeAfterClose:!1,button:{position:"right",color:"#212121"},blur:5,textColor:"#FFFFFF",borderColor:"#212121",backgroundColor:"#21212150",recommendationWidgetId:"",recommendationWidgetDelay:15,directAdvertisementId:"",directAdvertisementFloorAdId:"",directAdvertisementDelay:15,customCode:"",customCodeDelay:15,customCodePriority:!1},e.params),e.formatParams),n}return et(e,t),e.prototype.init=function(){var t=this;this.params.isYandex?(this.draw(),this.isFeedInView||this.zone.banners.forEach((function(e){return e.call({type:"floorAd",platform:tt.getPlatform(),onClose:function(){t.params.removeAfterClose&&t.element.remove()}})}))):setTimeout((function(){t.draw(),t.isFeedInView&&t.hide(),t.zone.banners.forEach((function(e,n){return e.call({onRender:function(){0===n&&t.start()},onStub:function(){var o;e.onStub(),0===n&&(null===(o=null==e?void 0:e.stub)||void 0===o?void 0:o.isActive)&&t.start()}})})),t.params.recommendationWidgetId&&window.yaContextCb.push((function(){window.Ya.Context.AdvManager.renderWidget({renderTo:"".concat(t.zone.banners[0].containerId,"_widget"),blockId:t.params.recommendationWidgetId})})),t.params.directAdvertisementId&&window.yaContextCb.push((function(){window.Ya.Context.AdvManager.render({renderTo:"".concat(t.zone.banners[0].containerId,"_direct"),blockId:t.params.directAdvertisementId})}))}),this.params.showAfter?1e3*this.params.showAfter:0),window.Caramel.EventEmitter.on("format:feedViewEnter",(function(){t.params.isYandex?t.zone.banners.forEach((function(t){return t.destroy()})):t.hide()})),window.Caramel.EventEmitter.on("format:feedViewLeave",(function(){t.params.isYandex?t.zone.banners.forEach((function(t){return t.call({type:"floorAd",platform:tt.getPlatform()})})):t.canShowForDevice()&&t.show()}))},e.prototype.draw=function(){var t,e,n,o,r,i,a=this,s=this.params,c=s.isYandex,l=s.button,d=s.canCloseAfter,u=s.removeAfterClose,p=s.blur,m=s.textColor,f=s.borderColor,h=s.backgroundColor,v=c?'\n        <div id="'.concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n      '):'\n        <div class="caramel-bottomLine">\n          <div class="caramel-bottomLine__toggle caramel-bottomLine__toggle--'.concat(l.position,'" style="color: ').concat(m,"; background-color: ").concat(l.color,';">\n            ').concat(d||Z.close,'\n          </div>\n          <div class="caramel-bottomLine__inner" style="border-top: 2px solid ').concat(f,"; backdrop-filter: blur(").concat(p,"px); background-color: ").concat(h,';">\n            <div id="').concat(null===(e=this.zone.banners[0])||void 0===e?void 0:e.containerId,'"></div>\n            ').concat(this.params.recommendationWidgetId?'<div id="'.concat(null===(n=this.zone.banners[0])||void 0===n?void 0:n.containerId,'_widget"></div>'):"","\n            ").concat(this.params.directAdvertisementId?'<div id="'.concat(null===(o=this.zone.banners[0])||void 0===o?void 0:o.containerId,'_direct"></div>'):"","\n            ").concat(this.params.customCode?'<div id="'.concat(null===(r=this.zone.banners[0])||void 0===r?void 0:r.containerId,'_custom"></div>'):"","\n          </div>\n        </div>\n      ");if(this.zone.container){this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",v),this.element=c?document.getElementById(null===(i=this.zone.banners[0])||void 0===i?void 0:i.containerId):this.zone.container.querySelector(".caramel-bottomLine");var y=this.zone.container.querySelector(".caramel-bottomLine__toggle");y&&y.addEventListener("click",(function(){y.innerHTML.includes("</svg>")&&(u?(a.hide(),setTimeout((function(){a.element.remove()}),700)):a.toggle())}))}},e.prototype.start=function(){var t=this;if(this.setStep(1),this.params.showAfterClose&&this.isManuallyClosed||this.show(),this.isManuallyClosed=!1,this.params.canCloseAfter&&this.startCountdown(),this.params.recommendationWidgetId)setTimeout((function(){t.setStep(2)}),1e3*this.params.recommendationWidgetDelay);else if(this.params.directAdvertisementId)setTimeout((function(){t.setStep(2)}),1e3*this.params.directAdvertisementDelay);else if(this.params.customCode)if(this.setStep(this.params.customCodePriority?2:1),q(this.params.customCode,document.getElementById("".concat(this.zone.banners[0].containerId,"_custom"))),this.params.customCodePriority){var e=setInterval((function(){t.hasCustomContent()&&(clearInterval(e),setTimeout((function(){t.setStep(1)}),1e3*t.params.customCodeDelay))}),100);setTimeout((function(){t.hasCustomContent()||(clearInterval(e),t.setStep(1))}),3e3)}else setTimeout((function(){t.hasCustomContent()&&t.setStep(2)}),1e3*this.params.customCodeDelay);!this.params.isYandex&&this.params.directAdvertisementFloorAdId&&(this.suppressNextDirectFloorAd?this.suppressNextDirectFloorAd=!1:(this.clearDirectFloorAdTimer(),this.destroyDirectFloorAd(),this.directFloorAdTimer=window.setTimeout((function(){t.callDirectFloorAd()}),1e3*this.params.directAdvertisementDelay)))},e.prototype.hasCustomContent=function(){var t=this.zone.banners[0].containerId,e=!!(document.querySelector("#".concat(t,"_custom iframe"))||document.querySelector("#".concat(t,"_custom img"))||document.querySelector("#".concat(t,"_custom video"))||document.querySelector(".adm-banner-container *")),n=document.querySelector('[id*="traff_container"]'),o=!!n&&n.offsetHeight>x;return e||o},e.prototype.stopCountdown=function(){null!==this.countdownTimer&&(clearInterval(this.countdownTimer),this.countdownTimer=null)},e.prototype.startCountdown=function(){var t,e=this;this.stopCountdown();var n=this.element.querySelector(".caramel-bottomLine__toggle");if(n){var o=null!==(t=this.params.canCloseAfter)&&void 0!==t?t:0;o&&(this.countdownLeft=o,n.innerHTML=String(this.countdownLeft),this.countdownTimer=window.setInterval((function(){if(e.countdownLeft-=1,e.countdownLeft<=0)return e.stopCountdown(),void(n.innerHTML=Z.close);n.innerHTML=String(e.countdownLeft)}),1e3))}},e.prototype.setStep=function(t){Array.from(this.element.querySelectorAll(".caramel-bottomLine__inner > div")).forEach((function(e,n){n===t-1?e.classList.remove("caramel--hidden"):e.classList.add("caramel--hidden")}))},e.prototype.callDirectFloorAd=function(){var t=this;this.clearDirectFloorAdTimer(),this.zone.container.querySelector(".caramel-bottomLine")&&window.yaContextCb.push((function(){window.Ya.Context.AdvManager.render({blockId:t.params.directAdvertisementFloorAdId,type:"floorAd",platform:tt.getPlatform(),onRender:function(){t.hide()},onClose:function(){t.params.removeAfterClose&&(t.destroyDirectFloorAd(),t.element.remove())}})}))},e.prototype.destroyDirectFloorAd=function(){var t=this;this.clearDirectFloorAdTimer(),window.yaContextCb.push((function(){window.Ya.Context.AdvManager.destroy({blockId:t.params.directAdvertisementFloorAdId})}));var e=document.querySelector('[class*="csr-uniq"]:has(div[data-'.concat(this.params.directAdvertisementFloorAdId.toLowerCase(),"-floorad])"));e&&e.remove()},e.prototype.clearDirectFloorAdTimer=function(){null!==this.directFloorAdTimer&&(clearTimeout(this.directFloorAdTimer),this.directFloorAdTimer=null)},e.prototype.show=function(){this.params.directAdvertisementFloorAdId&&this.destroyDirectFloorAd(),this.element.classList.add("open")},e.prototype.hide=function(){this.stopCountdown(),this.clearDirectFloorAdTimer(),this.element.classList.remove("open")},e.prototype.toggle=function(){var t=this;this.element.classList.contains("open")?(this.suppressNextDirectFloorAd=!!this.params.showAfterClose,this.hide(),this.isManuallyClosed=!0,this.params.showAfterClose&&setTimeout((function(){t.show(),t.start()}),1e3*this.params.showAfterClose)):this.show()},e}(Y);var rt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const it=function(t){function e(e){return t.call(this,e)||this}return rt(e,t),e.prototype.init=function(){this.draw(),this.zone.banners.forEach((function(t){return t.call()}))},e.prototype.draw=function(){var t,e='\n      <div class="caramel-combo">\n        <div id="'.concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n      </div>\n    ');this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",e),this.element=this.zone.container.querySelector(".caramel-combo"))},e}(Y);var at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=function(){return st=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},st.apply(this,arguments)};const ct=function(t){function e(e){var n=t.call(this,e)||this;return n.currentStep=1,n.params=st(st({width:300,height:250,rotateAfter:10,color:"#212121"},e.params),e.formatParams),n}return at(e,t),e.prototype.init=function(){this.draw(),this.zone.banners.forEach((function(t){return t.call()})),this.start()},e.prototype.draw=function(){var t,e,n,o,r,i,a,s,c=this.params.color,l=Math.floor(1*this.params.width),d=Math.floor(1*this.params.height),u='\n      <div class="caramel-cube" style="perspective: calc('.concat(l,'px * 2.5);">\n        <div class="caramel-cube__sides" style="width: ').concat(l,"px; height: ").concat(d,'px; transform: rotateY(0deg);">\n          <div data-step="2" class="caramel-cube__side caramel-cube__side--left" style="transform: translateX(-').concat(l/2,"px) rotateY(-90deg); background-color: ").concat(c,';">\n            <div id="').concat(null===(e=null===(t=this.zone.banners)||void 0===t?void 0:t[1])||void 0===e?void 0:e.containerId,'"></div>\n          </div>\n          <div data-step="4" class="caramel-cube__side caramel-cube__side--right" style="transform: translateX(').concat(l/2,"px) rotateY(90deg); background-color: ").concat(c,';">\n            <div id="').concat(null===(o=null===(n=this.zone.banners)||void 0===n?void 0:n[3])||void 0===o?void 0:o.containerId,'"></div>\n          </div>\n          <div data-step="1" class="caramel-cube__side caramel-cube__side--front" style="transform: translateZ(').concat(l/2,"px); background-color: ").concat(c,';">\n            <div id="').concat(null===(i=null===(r=this.zone.banners)||void 0===r?void 0:r[0])||void 0===i?void 0:i.containerId,'"></div>\n          </div>\n          <div data-step="3" class="caramel-cube__side caramel-cube__side--back" style="transform: translateZ(-').concat(l/2,"px) rotateY(180deg); background-color: ").concat(c,';">\n            <div id="').concat(null===(s=null===(a=this.zone.banners)||void 0===a?void 0:a[2])||void 0===s?void 0:s.containerId,'"></div>\n          </div>\n        </div>\n      </div>\n    ');this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",u),this.element=this.zone.container.querySelector(".caramel-cube"))},e.prototype.start=function(){var t=this,e=setInterval((function(){t.rotate()}),1e3*this.params.rotateAfter);document.addEventListener("visibilitychange",(function(){document.hidden?clearInterval(e):e=setInterval((function(){t.rotate()}),1e3*t.params.rotateAfter)}))},e.prototype.rotate=function(){var t=this,e=this.element.querySelector(".caramel-cube__sides"),n=parseFloat(e.style.transform.match(/rotateY\(([-\d.]+)deg\)/)[1]);this.element.classList.add("rotating"),e.style.transform="rotateY(".concat(n+90,"deg)"),4===this.currentStep?this.currentStep=1:this.currentStep+=1,setTimeout((function(){t.element.classList.remove("rotating"),2===t.zone.banners.length&&t.replace(t.currentStep)}),1e3)},e.prototype.replace=function(t){var e=this.element.querySelector('[data-step="'.concat(t%2!=0?"2":"1",'"]')),n=this.element.querySelector('[data-step="'.concat(t%2!=0?"4":"3",'"]'));if(e&&n){var o=e.cloneNode(!0),r=n.cloneNode(!0);e.parentNode.replaceChild(r,e),n.parentNode.replaceChild(o,n)}},e}(Y);var lt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const dt=function(t){function e(e){return t.call(this,e)||this}return lt(e,t),e.prototype.init=function(){this.draw()},e.prototype.draw=function(){var t="";this.zone.banners.forEach((function(e){t+='<div id="'.concat(e.containerId,'"></div>')})),this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",t))},e}(Y);var ut=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pt=function(){return pt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},pt.apply(this,arguments)};const mt=function(t){function e(e){var n=t.call(this,e)||this;return n.isShowedFirstTime=!1,n.params=pt(pt({showAfter:0,canCloseAfter:3,showAfterClose:0,removeAfterClose:!1,closeButton:{position:"tl",color:"#d05858"},position:{top:null,left:null,right:5,bottom:5},customCode:"",customCodeDelay:15,customCodePriority:!1},e.params),e.formatParams),n}return ut(e,t),e.prototype.init=function(){var t=this;setTimeout((function(){t.draw(),t.zone.banners.forEach((function(e){return e.call({onRender:function(){t.start()},onStub:function(){var n;e.onStub(),(null===(n=null==e?void 0:e.stub)||void 0===n?void 0:n.isActive)&&t.start()}})}))}),this.params.showAfter?1e3*this.params.showAfter:0),window.Caramel.EventEmitter.on("format:feedViewEnter",(function(){t.disappear()})),window.Caramel.EventEmitter.on("format:feedViewLeave",(function(){t.appear()}))},e.prototype.draw=function(){var t,e,n=this,o=this.params,r=o.canCloseAfter,i=o.closeButton,a=o.position,s=" \n      ".concat(null!==a.top?"top: ".concat(a.top,"px;"):""," \n      ").concat(null!==a.left?"left: ".concat(a.left,"px;"):"","\n      ").concat(null!==a.right?"right: ".concat(a.right,"px;"):""," \n      ").concat(null!==a.bottom?"bottom: ".concat(a.bottom,"px;"):""," \n    "),c='\n      <div class="caramel-fadeInBox" style="'.concat(s,'">\n        <div class="caramel-fadeInBox__close caramel-fadeInBox__close--').concat(i.position,'" style="background-color: ').concat(i.color,';">\n          ').concat(r||Z.close,'\n        </div>\n        <div class="caramel-fadeInBox__inner">\n          <div id="').concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n          ').concat(this.params.customCode?'<div id="'.concat(null===(e=this.zone.banners[0])||void 0===e?void 0:e.containerId,'_custom"></div>'):"","\n        </div>\n      </div>\n    ");if(this.zone.container){this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",c),this.element=this.zone.container.querySelector(".caramel-fadeInBox");var l=this.zone.container.querySelector(".caramel-fadeInBox__close");l&&l.addEventListener("click",(function(){l.innerHTML.includes("</svg>")&&(n.params.removeAfterClose?n.close():n.hide())}))}},e.prototype.start=function(){var t=this;if(this.isShowedFirstTime&&0!==this.params.showAfterClose||this.show(),this.isShowedFirstTime||(this.isShowedFirstTime=!0),this.params.canCloseAfter&&this.startCountdown(),this.params.customCode)if(this.setStep(this.params.customCodePriority?2:1),q(this.params.customCode,document.getElementById("".concat(this.zone.banners[0].containerId,"_custom"))),this.params.customCodePriority){var e=setInterval((function(){t.hasCustomContent()&&(clearInterval(e),setTimeout((function(){t.setStep(1)}),1e3*t.params.customCodeDelay))}),100);setTimeout((function(){t.hasCustomContent()||(clearInterval(e),t.setStep(1))}),3e3)}else setTimeout((function(){t.hasCustomContent()&&t.setStep(2)}),1e3*this.params.customCodeDelay)},e.prototype.hasCustomContent=function(){var t=this.zone.banners[0].containerId,e=!!(document.querySelector("#".concat(t,"_custom iframe"))||document.querySelector("#".concat(t,"_custom img"))||document.querySelector("#".concat(t,"_custom video"))||document.querySelector(".adm-banner-container *")),n=document.querySelector('[id*="traff_container"]'),o=!!n&&n.offsetHeight>x;return e||o},e.prototype.setStep=function(t){Array.from(this.element.querySelectorAll(".caramel-fadeInBox__inner > div")).forEach((function(e,n){n===t-1?e.classList.remove("caramel--hidden"):e.classList.add("caramel--hidden")}))},e.prototype.startCountdown=function(){var t=this.element.querySelector(".caramel-fadeInBox__close");t.innerHTML=this.params.canCloseAfter.toString();var e=this.params.canCloseAfter,n=setInterval((function(){(e-=1)<=0?(clearInterval(n),t.innerHTML=Z.close):t.innerHTML=e.toString()}),1e3)},e.prototype.show=function(){this.element.classList.add("open")},e.prototype.hide=function(){var t=this;this.element.classList.remove("open"),this.params.showAfterClose||setTimeout((function(){var e=document.getElementById(t.zone.banners[0].containerId);e&&(e.innerHTML="")}),1e3),this.params.showAfterClose&&setTimeout((function(){t.show(),t.startCountdown()}),1e3*this.params.showAfterClose)},e.prototype.close=function(){var t=this;this.element.classList.remove("open"),setTimeout((function(){t.zone.banners[0].destroy(),t.element.remove()}),1e3)},e.prototype.appear=function(){this.element&&this.show()},e.prototype.disappear=function(){this.element&&this.element.classList.remove("open")},e}(Y);var ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ht=function(){return ht=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ht.apply(this,arguments)};const vt=function(t){function e(e){var n=t.call(this,e)||this;return n.params=ht(ht({isYandex:!1,showAfter:0,canCloseAfter:5,backgroundOpacityPercentage:80,bar:{height:30,buttonColor:"#363636",progress:{activeColor:"#d05858",backgroundColor:"#212121"}}},e.params),e.formatParams),n}return ft(e,t),e.prototype.init=function(){var t=this;this.draw();var e=function(){t.zone.banners.forEach((function(e){return e.call(ht(ht({fullscreen:!0},t.params.isYandex?{type:"fullscreen"}:{fullscreen:!0}),{platform:tt.getPlatform(),onLoad:function(e){if(e&&(null==e?void 0:e.bundleParams)){var n=e.bundleParams,o=n.blockId,r=void 0===o?"":o,i=n.campaignId,a=["1823276","1820275"].includes(void 0===i?"":i);t.params.isYandex||r.startsWith("R-A")||a||document.querySelector(".caramel-fullscreen")||(t.drawCustomFullscreen(),setTimeout((function(){t.start()}),1))}},onRender:function(){t.params.isYandex&&requestAnimationFrame((function(){t.startYandexCountdown()}))}}))}))};this.params.showAfter?setTimeout((function(){e()}),1e3*this.params.showAfter):e()},e.prototype.draw=function(){var t,e='\n      <div id="'.concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n    ');this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",e))},e.prototype.drawCustomFullscreen=function(){var t='\n      <div class="caramel-fullscreen" style="background: rgba(0, 0, 0, '.concat(this.params.backgroundOpacityPercentage,'%);">\n        <div class="caramel-fullscreen__wrapper">\n          <div class="caramel-fullscreen__load-bar" style="height: ').concat(this.params.bar.height,'px">\n            <div class="caramel-fullscreen__load-bar__line" style="background-color: ').concat(this.params.bar.progress.backgroundColor,';">\n              <div class="caramel-fullscreen__load-bar__progress" style="background-color: ').concat(this.params.bar.progress.activeColor,"; transition-duration: ").concat(this.params.canCloseAfter,'s"></div>\n            </div>\n            <div class="caramel-fullscreen__load-bar__text" style="background-color: ').concat(this.params.bar.buttonColor,';">\n              ').concat(this.params.canCloseAfter?this.params.canCloseAfter:Z.close,'\n            </div>\n          </div>  \n          <div class="caramel-fullscreen__content"></div>\n        </div>\n      </div>\n    ');this.zone.container&&(this.zone.container.insertAdjacentHTML("beforeend",t),this.element=this.zone.container.querySelector(".caramel-fullscreen"),document.getElementById(this.zone.banners[0].containerId)&&this.element.querySelector(".caramel-fullscreen__content").appendChild(document.getElementById(this.zone.banners[0].containerId)))},e.prototype.start=function(){this.show(),this.startCountdown(this.params.canCloseAfter)},e.prototype.startCountdown=function(t){var e=this,n=this.element.querySelector(".caramel-fullscreen__load-bar__line"),o=this.element.querySelector(".caramel-fullscreen__load-bar__text");this.bodyFreeze(),n.classList.add("active");var r=t,i=setInterval((function(){(r-=1)<=0?(clearInterval(i),o.innerHTML=Z.close,o.addEventListener("click",(function(){e.bodyUnfreeze(),e.close()}))):o.textContent=r.toString()}),1e3)},e.prototype.startYandexCountdown=function(){if(0!==this.params.canCloseAfter){var t=document.querySelector('[data-fullscreen-element-name="close-btn"]');if(t){var e=t.innerHTML,n=this.params.canCloseAfter;t.innerHTML='<span class="caramel-fullscreen__customClose">'.concat(n.toString(),"</span>");var o=setInterval((function(){(n-=1)<=0?(clearInterval(o),t.innerHTML=e):t.innerHTML='<span class="caramel-fullscreen__customClose">'.concat(n.toString(),"</span>")}),1e3)}}},e.prototype.show=function(){this.element.classList.add("open")},e.prototype.close=function(){var t=this;this.element.classList.remove("open"),setTimeout((function(){t.zone.banners[0].destroy(),t.zone.container.remove()}),1e3)},e.prototype.bodyFreeze=function(){document.body.classList.add("caramel-freeze")},e.prototype.bodyUnfreeze=function(){document.body.classList.remove("caramel-freeze")},e}(Y);var yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=function(){return bt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},bt.apply(this,arguments)};const wt=function(t){function e(e){var n=t.call(this,e)||this;return n.params=bt(bt({height:"100vh",feedId:"",feedDelay:15,feedCardCount:6},e.params),e.formatParams),n}return yt(e,t),e.prototype.init=function(){var t=this;this.draw(),this.zone.banners.forEach((function(e){return e.call({onRender:function(){t.start()}})}))},e.prototype.draw=function(){var t,e,n=this.params.height,o='\n      <div class="caramel-interscroller" style="height: '.concat(this.canShowForDevice()?n:"0px",';">\n        <div class="caramel-interscroller__inner">\n          <div class="caramel-interscroller__banner">\n             <div id="').concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n             ').concat(this.params.feedId?'<div id="'.concat(null===(e=this.zone.banners[0])||void 0===e?void 0:e.containerId,'_feed" class="caramel--hidden" style="height: 100%;"></div>'):"","\n          </div>\n        </div>\n      </div>\n    ");this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",o),this.element=this.zone.container.querySelector(".caramel-interscroller"))},e.prototype.start=function(){var t=this;this.setStep(1),this.params.feedId&&(window.yaContextCb.push((function(){window.Ya.Context.AdvManager.render({type:"feed",blockId:t.params.feedId,feedCardCount:t.params.feedCardCount,renderTo:"".concat(t.zone.banners[0].containerId,"_feed")})})),setTimeout((function(){var e=t.element.querySelector("#".concat(t.zone.banners[0].containerId,"_feed > div"));e&&e.clientHeight>0&&t.setStep(2)}),1e3*this.params.feedDelay))},e.prototype.setStep=function(t){Array.from(this.element.querySelectorAll(".caramel-interscroller__banner > div")).forEach((function(e,n){n===t-1?e.classList.remove("caramel--hidden"):e.classList.add("caramel--hidden")}))},e}(Y);var gt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_t=function(){return _t=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},_t.apply(this,arguments)};const Ct=function(t){function e(e){var n=t.call(this,e)||this;return n.params=_t(_t({showAfter:1},e.params),e.formatParams),n}return gt(e,t),e.prototype.init=function(){this.draw(),this.zone.banners.forEach((function(t){return t.call()})),this.params.showAfter?setTimeout(this.start.bind(this),1e3*this.params.showAfter):this.start()},e.prototype.draw=function(){var t,e,n='\n      <div class="caramel-smartCatfish">\n        <div class="caramel-smartCatfish__item caramel-smartCatfish__item--top">\n          <div id="'.concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n        </div>\n        <div class="caramel-smartCatfish__item caramel-smartCatfish__item--bottom">\n          <div id="').concat(null===(e=this.zone.banners[1])||void 0===e?void 0:e.containerId,'"></div>\n        </div>\n      </div>\n    ');this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",n),this.element=this.zone.container.querySelector(".caramel-smartCatfish"),this.topElement=this.zone.container.querySelector(".caramel-smartCatfish__item--top"),this.bottomElement=this.zone.container.querySelector(".caramel-smartCatfish__item--bottom"))},e.prototype.start=function(){var t=this,e=null,n=window.scrollY||document.documentElement.scrollTop;window.addEventListener("scroll",(function(){return o()})),this.topElement.classList.add("active"),this.bottomElement.classList.add("active");var o=function(){var o=window.scrollY||document.documentElement.scrollTop;"up"===(e=o>n?"down":"up")?(t.topElement.classList.remove("active"),t.bottomElement.classList.add("active")):"down"===e&&(t.bottomElement.classList.remove("active"),t.topElement.classList.add("active")),n=o<=0?0:o}},e}(Y);var Et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xt=function(){return xt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},xt.apply(this,arguments)};const St=function(t){function e(e){var n=t.call(this,e)||this;return n.params=xt(xt({showAfter:1,canCloseAfter:3,position:"left",button:{position:"top",color:"#212121"}},e.params),e.formatParams),n}return Et(e,t),e.prototype.init=function(){var t=this;setTimeout((function(){t.draw(),t.zone.banners.forEach((function(e){return e.call({onRender:function(){t.start()}})}))}),this.params.showAfter?1e3*this.params.showAfter:0)},e.prototype.draw=function(){var t,e=this,n=this.params,o=n.canCloseAfter,r=n.position,i=n.button,a='\n      <div class="caramel-smartSticky caramel-smartSticky--'.concat(r,'">\n        <div class="caramel-smartSticky__toggle caramel-smartSticky__toggle--').concat(i.position,'" style="background-color: ').concat(i.color,'">\n          ').concat(o||Z.chevron,'\n        </div>\n        <div class="caramel-smartSticky__inner">\n          <div id="').concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n        </div>\n      </div>\n    ');if(this.zone.container){this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",a),this.element=this.zone.container.querySelector(".caramel-smartSticky");var s=this.zone.container.querySelector(".caramel-smartSticky__toggle");s&&s.addEventListener("click",(function(){s.innerHTML.includes("</svg>")&&e.toggle()}))}},e.prototype.start=function(){this.show(),this.params.canCloseAfter&&this.startCountdown()},e.prototype.startCountdown=function(){var t=this.element.querySelector(".caramel-smartSticky__toggle");t.innerHTML=this.params.canCloseAfter.toString();var e=this.params.canCloseAfter,n=setInterval((function(){0===(e-=1)?(clearInterval(n),t.innerHTML=Z.chevron):t.innerHTML=e.toString()}),1e3)},e.prototype.show=function(){this.element.classList.add("open")},e.prototype.hide=function(){this.element.classList.remove("open")},e.prototype.toggle=function(){this.element.classList.contains("open")?this.hide():this.show()},e}(Y);var At=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),It=function(){return It=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},It.apply(this,arguments)};const Lt=function(t){function e(e){var n=t.call(this,e)||this;return n.params=It(It({backgroundColor:"transparent",progress:{height:3.5,activeColor:"#d05858",backgroundColor:"#212121"},isSticky:!1,sticky:{top:null,left:null,right:20,bottom:20},isClosable:!1,canCloseAfter:5,closeButton:{position:"tr",color:"#212121"}},e.params),e.formatParams),n}return At(e,t),e.prototype.init=function(){this.draw(),this.zone.banners.forEach((function(t){return t.call()})),this.start()},e.prototype.draw=function(){var t=this.params,e=t.backgroundColor,n=t.progress,o=t.isSticky,r=t.sticky,i=t.isClosable,a=t.canCloseAfter,s=t.closeButton,c="caramel-story ".concat(o?"caramel-story--sticky":""),l="".concat(r?"\n            background-color: ".concat(e,"; \n            ").concat(o&&null!==r.top?"top: ".concat(r.top,"px;"):""," \n            ").concat(o&&null!==r.left?"left: ".concat(r.left,"px;"):""," \n            ").concat(o&&null!==r.right?"right: ".concat(r.right,"px;"):""," \n            ").concat(o&&null!==r.bottom?"bottom: ".concat(r.bottom,"px;"):""):""),d='\n      <div class="'.concat(c,'" style="').concat(l,'">\n        ').concat(i?'\n              <div class="caramel-story__close caramel-story__close--'.concat(s.position,'" style="background-color: ').concat(s.color,';">\n                ').concat(a,"\n              </div>\n            "):"",'\n        <div class="caramel-story__wrapper">\n          <div class="caramel-story__progress">\n            ').concat(this.zone.banners.map((function(){return'\n                  <div class="caramel-story__progress__item" style="height: '.concat(n.height,"px; background-image: -webkit-linear-gradient(left, ").concat(n.activeColor," 0%, ").concat(n.activeColor," 50%, ").concat(n.backgroundColor," 50.1%, ").concat(n.backgroundColor,' 100%); animation-duration: 10s"></div>\n                ')})).join(""),'\n          </div>\n          <div class="caramel-story__banners">\n            ').concat(this.zone.banners.map((function(t){return'\n                  <div class="caramel-story__banner">\n                    <div id="'.concat(t.containerId,'"></div>\n                  </div>\n                ')})).join(""),"\n          </div>\n        </div>\n      </div>\n    ");this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",d),this.element=this.zone.container.querySelector(".caramel-story"))},e.prototype.start=function(){var t=this,e=this.params,n=e.isClosable,o=e.canCloseAfter,r=this.element,i=Array.from(this.element.querySelectorAll(".caramel-story__banner")),a=this.element.querySelector(".caramel-story__close"),s=Array.from(this.element.querySelectorAll(".caramel-story__progress__item")),c=!1,l=!1;if(window.Caramel.EventEmitter.on("zoneOnViewEnter",(function(e){e===t.zone.id&&s.forEach((function(t){return t.classList.remove("paused")}))})),window.Caramel.EventEmitter.on("zoneOnViewLeave",(function(e){e===t.zone.id&&s.forEach((function(t){return t.classList.add("paused")}))})),a&&a.addEventListener("click",(function(){return p()})),n)var d=o,u=setInterval((function(){0===(d-=1)?(c=!0,a.innerHTML=Z.close,clearInterval(u)):a.innerHTML=d.toString()}),1e3);var p=function(){c&&(t.zone.banners.forEach((function(t){return t.destroy()})),t.element.innerHTML="")},m=function(e){var n,o,a=e.target,c=s.indexOf(a);n=c<s.length-2?c+2:c===s.length-2?0:1;var d=10,u=setInterval((function(){!r.matches(":hover")&&t.zone.isInView&&(d-=1),3===d&&l&&(t.zone.banners[n].reload(),clearInterval(u)),0===d&&clearInterval(u)}),1e3);c+1===s.length-1&&(l=!0),c+1<s.length?(o=c+1,a.classList.remove("active"),a.classList.add("passed")):(o=0,s.forEach((function(t){t.classList.remove("active"),t.classList.remove("passed")})),i.forEach((function(t){t.classList.remove("active")}))),s[o].classList.add("active"),i[o].classList.add("active"),i[c].classList.remove("active")};s.forEach((function(t){return t.addEventListener("animationend",m,!1)})),i[0].classList.add("active"),s[0].classList.add("active")},e}(Y);var Tt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},zt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},kt=function(){function t(t,e,n){var o=this;this.type="html",this.container=null,this.id=t.id,this.source=t.source,this.code=t.params.code,this.duration=t.duration,this.frequency=t.frequency,this.zone=n,this.container=e,D.get("logger")&&setInterval((function(){o.syncInfobox()}),200)}return t.prototype.call=function(){return Tt(this,void 0,void 0,(function(){var t,e=this;return zt(this,(function(n){return this.container?(q(this.code,this.container),t=Date.now(),[2,new Promise((function(n){var o=setInterval((function(){e.checkIsBlockEmpty(e.container)?Date.now()-t>=3e3&&(clearInterval(o),n(!1)):(clearInterval(o),n(!0))}),250)}))]):[2,!1]}))}))},t.prototype.checkIsBlockEmpty=function(t){var e=""!==t.innerHTML.trim(),n=t.children.length>0,o=!!Array.from(t.querySelectorAll("iframe, img, video")).filter((function(t){return t.scrollHeight>x})).length,r=!!t.querySelector('div[id*="yandex_rtb"]')&&t.querySelector('div[id*="yandex_rtb"]').scrollHeight>x,i=!!t.querySelector("*[data-filled]"),a=!!i&&"true"===t.querySelector("*[data-filled]").getAttribute("data-filled");return!e||!n||!r&&(i?!a:!o)},t.prototype.show=function(){this.container.setAttribute("data-state","filled")},t.prototype.hide=function(){this.container.setAttribute("data-state","empty"),this.container.innerHTML=""},t.prototype.syncInfobox=function(){var t,e;this.container&&"empty"!==this.container.getAttribute("data-state")&&("static"===window.getComputedStyle(this.container).position&&(this.zone.container.style.position="relative"),null===(t=this.container.querySelector(".caramel-infobox"))||void 0===t||t.remove(),null===(e=this.container)||void 0===e||e.insertAdjacentHTML("afterbegin",'<span class="caramel-infobox caramel-infobox--vast">'.concat(this.source,"</span>")))},t}();const Ot=kt;var Bt=function(){return Bt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Bt.apply(this,arguments)},Pt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},jt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Mt=function(){function t(t){var e,n;this.player=null,this.videoElement=null,this.id=Math.random().toString(16).slice(2,8),this.vastUrl=t.vastUrl,this.container=t.container,this.zone=t.zone,this.source=t.source,this.timeout=null!==(e=t.timeout)&&void 0!==e?e:8e3,this.percentage=t.percentage,this.wrapperStyle=null!==(n=t.wrapperStyle)&&void 0!==n?n:""}return t.prototype.call=function(){return Pt(this,void 0,void 0,(function(){var t,e,n=this;return jt(this,(function(o){return this.createVideoElement(),this.videoElement&&this.wrapper?window.ya.videoAd&&"function"==typeof window.ya.videoAd.loadModule?(t=this.videoElement,e=this.wrapper,[2,new Promise((function(o){var r=!1,i=function(t){r||(r=!0,null!==s&&clearTimeout(s),o(t))},a=n.timeout,s=window.setTimeout((function(){n.emitEvent("videoSDK:error",{type:"YANDEX_TIMEOUT",message:"Yandex Video Ads SDK did not start within ".concat(a," ms")}),n.cleanup(),i(!1)}),a);window.ya.videoAd.loadModule("AdLoader").then((function(t){return t.AdLoader.create({vastUrl:n.vastUrl,adBreakType:"preroll"})})).then((function(t){return t.loadAd()})).then((function(e){return e.preload({videoSlot:t}).then((function(){return e})).catch((function(){return e}))})).then((function(o){var a=o.createPlaybackController(t,e);n.player=a;var s=function(t,e){a&&"function"==typeof a.subscribe&&a.subscribe(t,e)},c=function(){n.emitEvent("videoSDK:start"),D.get("logger")&&n.syncInfobox(),i(!0)};s("AdStarted",(function(){c()})),s("AdPodImpression",(function(){r||c()}));var l=function(){n.emitEvent("videoSDK:end"),n.cleanup()};s("AllAdPodVideoComplete",l),s("AdPodComplete",l),s("AdPodStopped",l),s("AdStopped",l),s("AdPodError",(function(t){n.emitEvent("videoSDK:error",{type:"YANDEX_AD_ERROR",error:(null==t?void 0:t.errorMessage)||"Yandex Video Ads AdPod error",raw:t}),n.cleanup(),i(!1)})),s("AdStartRejected",(function(t){n.emitEvent("videoSDK:error",{type:"AUTOPLAY_BLOCKED",message:"Autoplay rejected by browser (AdStartRejected)",raw:t}),n.cleanup(),i(!1)})),s("AdClickThru",(function(){})),"function"==typeof a.playAd?a.playAd():(n.emitEvent("videoSDK:error",{type:"YANDEX_CONTROLLER_INVALID",message:"AdPlaybackController.playAd is not a function"}),n.cleanup(),i(!1))})).catch((function(t){n.emitEvent("videoSDK:error",{type:"YANDEX_SDK_ERROR",message:"Failed to initialize or load Yandex Video Ads SDK",innerError:t}),n.cleanup(),i(!1)}))}))]):(this.emitEvent("videoSDK:error",{type:"YANDEX_SDK_NOT_LOADED",message:"Yandex Video Ads SDK is not available on window.ya.videoAd"}),this.cleanup(),[2,!1]):(this.emitEvent("videoSDK:error",{type:"VIDEO_SLOT_NOT_CREATED",message:"Failed to create video slot"}),this.cleanup(),[2,!1])}))}))},t.prototype.pause=function(){if(this.player)try{"function"==typeof this.player.pauseAd?this.player.pauseAd():"function"==typeof this.player.pause&&this.player.pause()}catch(t){}},t.prototype.resume=function(){if(this.player)try{"function"==typeof this.player.resumeAd?this.player.resumeAd():"function"==typeof this.player.playAd?this.player.playAd():"function"==typeof this.player.play&&this.player.play()}catch(t){}},t.prototype.stop=function(){if(this.player)try{"function"==typeof this.player.stopAd?this.player.stopAd():"function"==typeof this.player.pause&&this.player.pause()}catch(t){}this.cleanup()},t.prototype.destroy=function(){this.stop()},t.prototype.createVideoElement=function(){if(!this.videoElement){var t=this.container.clientWidth>100?this.container.clientWidth:300,e=this.container.clientHeight>100?this.container.clientHeight:250;this.container.insertAdjacentHTML("beforeend",'\n        <div id="Caramel_VideoAd_'.concat(this.id,'" style="width: ').concat(t,"px; height: ").concat(e,"px; overflow: hidden; position: relative; ").concat(this.wrapperStyle,'">\n          <video\n            id="Caramel_VideoAd_Player_').concat(this.id,'"\n            playsinline\n            webkit-playsinline\n            muted\n            style="width: 100%; height: 100%;"\n          ></video>\n        </div>\n      ')),this.wrapper=document.getElementById("Caramel_VideoAd_".concat(this.id)),this.videoElement=document.getElementById("Caramel_VideoAd_Player_".concat(this.id))}},t.prototype.cleanup=function(){if(this.player=null,this.wrapper)try{this.wrapper.remove()}catch(t){}this.wrapper=null,this.videoElement=null},t.prototype.emitEvent=function(t,e){var n,o,r,i,a=Bt({zone:null===(n=this.zone)||void 0===n?void 0:n.name,source:this.source,vastUrl:this.vastUrl},e);null===(i=null===(r=null===(o=window.Caramel)||void 0===o?void 0:o.EventEmitter)||void 0===r?void 0:r.emit)||void 0===i||i.call(r,t,a)},t.prototype.syncInfobox=function(){var t;if(this.container){var e=this.container.querySelector("#Caramel_VideoAd_".concat(this.id));e&&e.insertAdjacentHTML("afterbegin",'<span class="caramel-infobox caramel-infobox--vast">'.concat(null!==(t=this.source)&&void 0!==t?t:"","</span>"))}},t}();const Dt=Mt;var Ft=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},qt=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Ht=function(){function t(t,e,n){this.type="vast",this.container=null,this.id=t.id,this.source=t.source,this.vastUrl=t.params.vastUrl,this.duration=t.duration,this.frequency=t.frequency,this.zone=n,this.container=e}return t.prototype.call=function(){return Ft(this,void 0,void 0,(function(){return qt(this,(function(t){switch(t.label){case 0:return this.container?[4,new Dt({vastUrl:this.vastUrl,container:this.container,zone:this.zone,source:this.source,timeout:3e3}).call()]:[2,!1];case 1:return[2,t.sent()]}}))}))},t.prototype.show=function(){this.container.setAttribute("data-state","filled")},t.prototype.hide=function(){this.container.setAttribute("data-state","empty"),this.container.innerHTML=""},t}();const Rt=Ht;var Nt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vt=function(){return Vt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Vt.apply(this,arguments)},Yt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Ut=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Wt=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};const Gt=function(t){function e(e){var n,o,r=t.call(this,e)||this;r.blockInstances=[],r.currentBlock=null,r.pool=[],r.preselectedNext=null,r.preloadTimeoutId=null,r.PREFETCH_OFFSET_MS=4e3,r.isRemoved=!1,r.countdownTimer=null,r.isTemporarilyClosed=!1,r.isPaused=!1,r.resumeWaiters=[],r.handleVisibilityChange=function(){document.hidden?r.pauseRotation():r.resumeRotation()};var i=null!==(o=null===(n=e.formatParams)||void 0===n?void 0:n.blocks)&&void 0!==o?o:[];return r.params=Vt(Vt(Vt({width:"300px",height:"250px",type:"static",canCloseAfter:3,closeButton:{position:"tl",color:"#d05858"},position:{top:null,left:null,right:0,bottom:0}},e.params),e.formatParams),{blocks:i.length?i.map((function(t){var e,n,o,r,i,a,s,c,l,d,u,p;return Vt(Vt({},t),{id:t.id,type:null!==(e=null==t?void 0:t.type)&&void 0!==e?e:"html",source:null!==(n=null==t?void 0:t.source)&&void 0!==n?n:"",sourceType:null!==(o=null==t?void 0:t.sourceType)&&void 0!==o?o:"",matchingId:null!==(r=null==t?void 0:t.matchingId)&&void 0!==r?r:"",duration:(null==t?void 0:t.duration)||13,allowedCountries:null!==(i=null==t?void 0:t.allowedCountries)&&void 0!==i?i:[],blockedCountries:null!==(a=null==t?void 0:t.blockedCountries)&&void 0!==a?a:[],frequency:null!==(s=null==t?void 0:t.frequency)&&void 0!==s?s:0,isActive:null===(c=null==t?void 0:t.isActive)||void 0===c||c,params:{vastUrl:null!==(d=null===(l=null==t?void 0:t.params)||void 0===l?void 0:l.vastUrl)&&void 0!==d?d:null,code:null!==(p=null===(u=null==t?void 0:t.params)||void 0===u?void 0:u.code)&&void 0!==p?p:""}})})):[]}),r}return Nt(e,t),e.prototype.init=function(){return Yt(this,void 0,void 0,(function(){var t,e,n=this;return Ut(this,(function(o){switch(o.label){case 0:return this.params.blocks.length?(this.draw(),this.createInstances(),this.blockInstances.length?(this.attachVisibilityListener(),"stickyOnScroll"===this.params.type&&this.initScrollObservation(),"stickyAlways"===this.params.type&&this.start(),this.log("info","StreamLine initialized with ".concat(this.blockInstances.length," blocks.")),t=function(){return Yt(n,void 0,void 0,(function(){return Ut(this,(function(t){switch(t.label){case 0:return[4,this.waitUntilResumed()];case 1:return t.sent(),[4,this.startRotation()];case 2:return t.sent(),[2]}}))}))},(null===(e=null===window||void 0===window?void 0:window.ya)||void 0===e?void 0:e.videoAd)?[4,t()]:[3,2]):(this.log("info","No eligible blocks after filtering, aborting StreamLine."),[2])):[2];case 1:return o.sent(),[3,3];case 2:window.Caramel.EventEmitter.on("videoSDK:connectSuccess",(function(){return Yt(n,void 0,void 0,(function(){return Ut(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),[2]}}))}))})),o.label=3;case 3:return[2]}}))}))},e.prototype.draw=function(){var t=this,e=this.params,n=e.width,o=e.height,r=e.type,i=e.canCloseAfter,a=e.closeButton,s=e.position,c=e.blocks,l="\n      width: ".concat(n,";\n      height: ").concat(o,";\n      ").concat("static"!==r&&null!==s.top?"top: ".concat(s.top,"px;"):"","\n      ").concat("static"!==r&&null!==s.left?"left: ".concat(s.left,"px;"):"","\n      ").concat("static"!==r&&null!==s.right?"right: ".concat(s.right,"px;"):""," \n      ").concat("static"!==r&&null!==s.bottom?"bottom: ".concat(s.bottom,"px;"):""," \n    "),d='\n      <div class="caramel-streamLine caramel-streamLine--'.concat(r,'" style="').concat(l,'">\n        ').concat("stickyAlways"===r?'\n            <div class="caramel-streamLine__close caramel-streamLine__close--'.concat(a.position,'" style="background-color: ').concat(a.color,';">\n              ').concat(i||Z.close,"\n            </div>\n          "):"",'\n        <div class="caramel-streamLine__inner">\n          ').concat(c.filter((function(t){return t.isActive})).map((function(t){return'\n                <div id="Caramel_'.concat(t.id,'" class="caramel-streamLine__block" data-type="').concat(t.type,'" data-state="empty"></div>\n              ')})).join(""),"\n        </div>\n      </div>\n    ");if(this.zone.container){this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",d),this.element=this.zone.container.querySelector(".caramel-streamLine");var u=this.zone.container.querySelector(".caramel-streamLine__close");u&&(this.hideCloseButton(),u.addEventListener("click",(function(){var e=u.innerHTML.trim();!Number.isNaN(Number(e))||(e.includes("<svg")||e.includes("</svg>"))&&t.close()})))}},e.prototype.createInstances=function(){var t=this;this.blockInstances=this.params.blocks.filter((function(t){return t.isActive})).filter((function(t){var e=t.allowedCountries.map((function(t){return t.toLowerCase()})),n=t.blockedCountries.map((function(t){return t.toLowerCase()}));return e.length?e.includes(window.Caramel.Geo.countryCode):!n.length||!n.includes(window.Caramel.Geo.countryCode)})).filter((function(t){return"html"===t.type||"vast"===t.type})).map((function(e){var n=document.getElementById("Caramel_".concat(e.id));return n?"html"===e.type?new Ot(e,n,t.zone):"vast"===e.type?new Rt(e,n,t.zone):null:null})).filter(Boolean)},e.prototype.pauseRotation=function(){var t,e;this.isPaused||(this.isPaused=!0,this.log("info","Rotation paused (tab hidden). current = ".concat(null!==(e=null===(t=this.currentBlock)||void 0===t?void 0:t.source)&&void 0!==e?e:"none")),null!==this.preloadTimeoutId&&(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=null),this.preselectedNext=null,null!==this.countdownTimer&&(clearInterval(this.countdownTimer),this.countdownTimer=null))},e.prototype.resumeRotation=function(){var t,e;this.isPaused&&(this.isPaused=!1,this.log("info","Rotation resumed (tab visible). current = ".concat(null!==(e=null===(t=this.currentBlock)||void 0===t?void 0:t.source)&&void 0!==e?e:"none")),this.resumeWaiters.splice(0).forEach((function(t){return t()})),"stickyAlways"===this.params.type&&this.params.canCloseAfter&&this.currentBlock&&this.startCountdown(),this.currentBlock&&this.scheduleNextPrefetch(this.currentBlock))},e.prototype.waitUntilResumed=function(){return Yt(this,void 0,void 0,(function(){var t=this;return Ut(this,(function(e){switch(e.label){case 0:return this.isPaused?[4,new Promise((function(e){return t.resumeWaiters.push(e)}))]:[2];case 1:return e.sent(),[2]}}))}))},e.prototype.attachVisibilityListener=function(){document.addEventListener("visibilitychange",this.handleVisibilityChange),document.hidden&&this.pauseRotation()},e.prototype.detachVisibilityListener=function(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)},e.prototype.hideAllBlocks=function(t){this.blockInstances.forEach((function(e){t&&e===t||e.hide()})),this.hideInterferringElements()},e.prototype.hideInterferringElements=function(){Wt(Wt(Wt(Wt([],Array.from(document.querySelectorAll(".grf-mobile-fullscreen")),!0),Array.from(document.querySelectorAll(".buzz-container.buzzplayer-touch.buzz_fullscreen")),!0),Array.from(document.querySelectorAll(".alfadart-fullscreen")),!0),Array.from(document.querySelectorAll("#fl_btw_ad_centercenter")),!0).forEach((function(t){return t.remove()}))},e.prototype.hideCloseButton=function(){if(this.element){var t=this.element.querySelector(".caramel-streamLine__close");t&&(t.style.display="none")}},e.prototype.showCloseButton=function(){if(this.element){var t=this.element.querySelector(".caramel-streamLine__close");t&&(t.style.display="")}},e.prototype.reopenIfClosed=function(){this.element&&this.isTemporarilyClosed&&(this.element.classList.remove("caramel-streamLine--closed"),this.isTemporarilyClosed=!1)},e.prototype.startCountdown=function(){var t=this;if(this.element&&this.params.canCloseAfter&&!this.isPaused&&!document.hidden){var e=this.element.querySelector(".caramel-streamLine__close");if(e){null!==this.countdownTimer&&(clearInterval(this.countdownTimer),this.countdownTimer=null);var n=this.params.canCloseAfter;e.innerHTML=n.toString(),this.countdownTimer=window.setInterval((function(){t.isPaused||document.hidden?null!==t.countdownTimer&&(clearInterval(t.countdownTimer),t.countdownTimer=null):(n-=1)<=0?(null!==t.countdownTimer&&(clearInterval(t.countdownTimer),t.countdownTimer=null),e.innerHTML=Z.close):e.innerHTML=n.toString()}),1e3)}}},e.prototype.start=function(){this.params.canCloseAfter&&this.startCountdown()},e.prototype.close=function(){if(null!==this.countdownTimer&&(clearInterval(this.countdownTimer),this.countdownTimer=null),null!==this.preloadTimeoutId&&(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=null),this.hideAllBlocks(),this.element){if("stickyAlways"===this.params.type)return this.element.classList.add("caramel-streamLine--closed"),void(this.isTemporarilyClosed=!0);this.element.remove(),this.isRemoved=!0,this.detachVisibilityListener(),this.resumeWaiters.splice(0).forEach((function(t){return t()}))}},e.prototype.isFrequencyBlocked=function(t){return!!t.frequency&&Boolean(N("Caramel_".concat(t.id,"_shown")))},e.prototype.markBlockShown=function(t){t.frequency&&V("Caramel_".concat(t.id,"_shown"),"1",t.frequency)},e.prototype.probeBlock=function(t){return Yt(this,void 0,void 0,(function(){var e,n;return Ut(this,(function(o){switch(o.label){case 0:if(t._isProbing)return[2,null!==(n=t._lastStatus)&&void 0!==n&&n];t._isProbing=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,t.call()];case 2:return e=o.sent(),t._lastStatus=e,[2,e];case 3:return o.sent(),t._lastStatus=!1,[2,!1];case 4:return t._isProbing=!1,[7];case 5:return[2]}}))}))},e.prototype.selectFromPool=function(){return Yt(this,void 0,void 0,(function(){var t,e,n,o,r,i,a,s=this;return Ut(this,(function(c){switch(c.label){case 0:return this.pool.length||(this.pool=Wt([],this.blockInstances,!0)),t=Date.now(),e=this.pool.filter((function(e){return e!==s.currentBlock&&(!s.isFrequencyBlocked(e)&&!(e._cooldownUntil&&e._cooldownUntil>t))})),n=this.pool.filter((function(t){return s.isFrequencyBlocked(t)})),e.length?[3,2]:(o=n.map((function(t){var e;return null!==(e=t.source)&&void 0!==e?e:t.id})).join(", ")||"unknown",this.log("info","All blocks are unavailable (frequency or cooldown), resetting rotation. Locked: ".concat(o)),this.blockInstances.forEach((function(t){t._cooldownUntil=0,t._failCount=0})),this.pool=Wt([],this.blockInstances,!0),this.currentBlock&&!this.isFrequencyBlocked(this.currentBlock)?[2,this.currentBlock]:[4,F(200)]);case 1:return c.sent(),[2,null];case 2:return r=e.length,i=this.blockInstances.filter((function(t){return e.includes(t)})),a=new Map,[2,new Promise((function(t){var e=!1,n=function(n){if(!e){e=!0,clearTimeout(c);var o=[];i.forEach((function(t){var e=a.get(t);e&&o.push("".concat(t.source,": ").concat(e.isShown?"filled":"empty"," in ").concat(e.time,"ms"))}));var l=o.join(" | ");if(!n)return s.log("info","No winners in pool, resetting. Candidates = ".concat(r,". Attempts: ").concat(l||"no attempts finished")),s.pool=Wt([],s.blockInstances,!0),void t(null);r>1?(s.pool=s.pool.filter((function(t){return t!==n})),s.log("success","Winner: ".concat(n.source," (removed from pool). Pool size before = ").concat(r,", after = ").concat(s.pool.length,". Details: ").concat(l))):(s.log("success","Winner: ".concat(n.source," (single in pool, restarting pool). Pool size before = ").concat(r,". Details: ").concat(l)),s.pool=Wt([],s.blockInstances,!0)),t(n)}},o=function(t){if(void 0===t&&(t=!1),!e){var o=i.filter((function(t){var e=a.get(t);return(null==e?void 0:e.done)&&e.isShown}));if(o.length){var r=o[0],s=i.indexOf(r),c=i.slice(0,s).some((function(t){var e;return!(null===(e=a.get(t))||void 0===e?void 0:e.done)}));c&&!t||n(r)}else{var l=i.every((function(t){var e;return null===(e=a.get(t))||void 0===e?void 0:e.done}));(l||t)&&n(null)}}},c=window.setTimeout((function(){o(!0)}),2500);i.forEach((function(t){var e=Date.now();s.probeBlock(t).then((function(n){var r,i,c=Date.now()-e;n?(t._failCount=0,t._cooldownUntil=0):(t._failCount=(null!==(r=t._failCount)&&void 0!==r?r:0)+1,(null!==(i=t._failCount)&&void 0!==i?i:0)>=5&&(s.log("error","Block ".concat(t.source," entered 1 minute cooldown due to ").concat(t._failCount," consecutive empty attempts.")),t._cooldownUntil=Date.now()+6e4)),a.set(t,{isShown:n,time:c,done:!0}),o(!1)})).catch((function(){var n,r,i=Date.now()-e;t._failCount=(null!==(n=t._failCount)&&void 0!==n?n:0)+1,(null!==(r=t._failCount)&&void 0!==r?r:0)>=5&&(s.log("error","Block ".concat(t.source," entered 1 minute cooldown due to ").concat(t._failCount," consecutive empty attempts.")),t._cooldownUntil=Date.now()+6e4),a.set(t,{isShown:!1,time:i,done:!0}),o(!1)}))}))}))]}}))}))},e.prototype.scheduleNextPrefetch=function(t){var e,n=this;if(null!==this.preloadTimeoutId&&(clearTimeout(this.preloadTimeoutId),this.preloadTimeoutId=null),!this.isPaused&&!document.hidden){var o=1e3*(null!==(e=t.duration)&&void 0!==e?e:0);if(o){var r=Math.max(0,o-this.PREFETCH_OFFSET_MS);this.preloadTimeoutId=window.setTimeout((function(){return Yt(n,void 0,void 0,(function(){var e;return Ut(this,(function(n){switch(n.label){case 0:return this.isRemoved||(this.isPaused||document.hidden||this.currentBlock!==t)?[2]:[4,this.selectFromPool()];case 1:return(e=n.sent())?(this.preselectedNext=e,this.log("info","Prepared next block: ".concat(e.source,".")),[2]):(this.preselectedNext=null,[2])}}))}))}),r)}}},e.prototype.startRotation=function(){return Yt(this,void 0,void 0,(function(){var t,e,n;return Ut(this,(function(o){switch(o.label){case 0:if(!this.blockInstances.length)return[2];this.pool=Wt([],this.blockInstances,!0),t=null,o.label=1;case 1:return this.isRemoved||t?[3,4]:[4,this.waitUntilResumed()];case 2:return o.sent(),this.isRemoved?[3,4]:[4,this.selectFromPool()];case 3:return(t=o.sent())||this.log("info","No initial winner, retrying."),[3,1];case 4:if(!t||this.isRemoved)return[2];this.hideAllBlocks(t),this.reopenIfClosed(),t.show(),this.currentBlock=t,this.markBlockShown(t),this.showCloseButton(),"stickyAlways"===this.params.type&&this.params.canCloseAfter&&this.startCountdown(),this.scheduleNextPrefetch(t),o.label=5;case 5:return this.isRemoved?[3,14]:[4,this.waitUntilResumed()];case 6:return o.sent(),this.isRemoved?[3,14]:(e=this.currentBlock)?[4,F(1e3*e.duration)]:[3,8];case 7:if(o.sent(),this.isRemoved)return[3,14];o.label=8;case 8:return[4,this.waitUntilResumed()];case 9:return o.sent(),this.isRemoved?[3,14]:(n=this.preselectedNext)?[3,11]:[4,this.selectFromPool()];case 10:n=o.sent(),o.label=11;case 11:return n?[3,13]:(this.hideAllBlocks(),this.currentBlock=null,this.preselectedNext=null,this.hideCloseButton(),this.log("info","No filled blocks available, StreamLine is empty for now."),[4,F(1e3)]);case 12:return o.sent(),[3,5];case 13:return this.hideAllBlocks(n),this.reopenIfClosed(),n.show(),this.currentBlock=n,this.preselectedNext=null,this.markBlockShown(n),this.showCloseButton(),this.log("success","Switched to: ".concat(n.source," | duration = ").concat(n.duration,"s.")),"stickyAlways"===this.params.type&&this.params.canCloseAfter&&this.startCountdown(),this.scheduleNextPrefetch(n),[3,5];case 14:return[2]}}))}))},e.prototype.initScrollObservation=function(){var t=this;if(this.zone.container&&this.element){var e=this.element.offsetHeight;new IntersectionObserver((function(n){n.forEach((function(n){n.isIntersecting?(t.zone.container.style.height="",t.element.classList.remove("active")):(t.zone.container.style.height="".concat(e,"px"),t.element.classList.add("active"))}))}),{threshold:0}).observe(this.zone.container)}},e.prototype.log=function(t,e){window.Caramel.EventEmitter.emit("streamLine:log",t,e)},e}(Y);var Kt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zt=function(){return Zt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Zt.apply(this,arguments)};const Xt=function(t){function e(e){var n=t.call(this,e)||this;return n.isShowedFirstTime=!1,n.params=Zt(Zt({isYandex:!1,showAfter:1,canCloseAfter:3,showAfterClose:0,removeAfterClose:!1,button:{position:"right",color:"#212121"},blur:5,textColor:"#FFFFFF",borderColor:"#212121",backgroundColor:"#21212150"},e.params),e.formatParams),n}return Kt(e,t),e.prototype.init=function(){var t=this;this.params.isYandex?(this.draw(),this.isFeedInView||this.zone.banners.forEach((function(e){return e.call({type:"topAd",platform:tt.getPlatform(),onClose:function(){t.params.removeAfterClose&&t.element.remove()}})}))):(this.zone.banners.forEach((function(t){return t.call()})),setTimeout((function(){t.draw(),t.isFeedInView&&t.hide(),t.zone.banners.forEach((function(e){return e.call({onRender:function(){t.start()},onStub:function(){var n;e.onStub(),(null===(n=null==e?void 0:e.stub)||void 0===n?void 0:n.isActive)&&t.start()}})}))}),this.params.showAfter?1e3*this.params.showAfter:0)),window.Caramel.EventEmitter.on("format:feedViewEnter",(function(){t.params.isYandex?t.zone.banners.forEach((function(t){return t.destroy()})):t.hide()})),window.Caramel.EventEmitter.on("format:feedViewLeave",(function(){t.params.isYandex?t.zone.banners.forEach((function(t){return t.call({type:"topAd",platform:tt.getPlatform()})})):t.show()}))},e.prototype.draw=function(){var t,e,n,o=this,r=this.params,i=r.canCloseAfter,a=r.isYandex,s=r.button,c=r.removeAfterClose,l=r.blur,d=r.textColor,u=r.borderColor,p=r.backgroundColor,m=a?'\n        <div id="'.concat(null===(t=this.zone.banners[0])||void 0===t?void 0:t.containerId,'"></div>\n      '):'\n        <div class="caramel-topLine">\n          <div class="caramel-topLine__toggle caramel-topLine__toggle--'.concat(s.position,'" style="color: ').concat(d,"; background-color: ").concat(s.color,'">\n            ').concat(i||Z.close,'\n          </div>\n          <div class="caramel-topLine__inner" style="border-bottom: 2px solid ').concat(u,"; backdrop-filter: blur(").concat(l,"px); background-color: ").concat(p,';">\n            <div id="').concat(null===(e=this.zone.banners[0])||void 0===e?void 0:e.containerId,'"></div>\n          </div>\n        </div>\n      ');if(this.zone.container){this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",m),this.element=a?document.getElementById(null===(n=this.zone.banners[0])||void 0===n?void 0:n.containerId):this.zone.container.querySelector(".caramel-topLine");var f=this.zone.container.querySelector(".caramel-topLine__toggle");f&&f.addEventListener("click",(function(){f.innerHTML.includes("</svg>")&&(c?(o.hide(),setTimeout((function(){o.element.remove()}),700)):o.toggle())}))}},e.prototype.start=function(){this.isShowedFirstTime&&0!==this.params.showAfterClose||this.show(),this.isShowedFirstTime||(this.isShowedFirstTime=!0),this.params.canCloseAfter&&this.startCountdown()},e.prototype.startCountdown=function(){var t=this.element.querySelector(".caramel-topLine__toggle");t.innerHTML=this.params.canCloseAfter.toString();var e=this.params.canCloseAfter,n=setInterval((function(){0===(e-=1)?(clearInterval(n),t.innerHTML=Z.close):t.innerHTML=e.toString()}),1e3)},e.prototype.show=function(){this.element.classList.add("open")},e.prototype.hide=function(){var t=this;this.element.classList.remove("open"),this.params.showAfterClose&&setTimeout((function(){t.show(),t.startCountdown()}),1e3*this.params.showAfterClose)},e.prototype.toggle=function(){this.element.classList.contains("open")?this.hide():this.show()},e}(Y);var Jt="vk",Qt="vimeo",$t="twitter",te="youtube",ee="telegram",ne="htmlVideo",oe=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),re=function(){return re=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},re.apply(this,arguments)};const ie=function(t){function e(e){var n=t.call(this,e)||this;return n.targetElement=null,n.bannerElement=null,n.playerStarted=!1,n.playerElement=null,n.playerType=null,n.params=re(re({showAfter:3,showAfterClick:!1,canCloseAfter:10,offsetBottom:50,button:{position:"right",color:"#212121"}},e.params),e.formatParams),n}return oe(e,t),e.prototype.init=function(){this.canShowForDevice()&&(this.targetElement=document.querySelector(this.zone.params.cssPath.targetSelector),this.setupObservers(),this.detectPlayerType(),this.detectPlayerElement(),this.params.showAfterClick?this.initPlayerBasedOnType():this.showOverlayAfterDelay())},e.prototype.setupObservers=function(){var t=this;window.addEventListener("blur",(function(){return window.focus()})),document.addEventListener("mousemove",(function(e){t.clientX=e.clientX,t.clientY=e.clientY}))},e.prototype.showOverlayAfterDelay=function(){var t=this;this.draw(),requestAnimationFrame((function(){t.callBanners()})),setTimeout((function(){t.show(),t.startCountdown()}),1e3*this.params.showAfter)},e.prototype.draw=function(t){var e;void 0===t&&(t=!1);var n=this.params,o=n.offsetBottom,r=n.button,i='\n      <div class="caramel-videoOverlay">\n        '.concat(t?'<div class="caramel-videoOverlay__background"></div>':"",'\n        <div class="caramel-videoOverlay__banner" style="bottom: ').concat(o,'px;">\n          <div class="caramel-videoOverlay__close caramel-videoOverlay__close--').concat(r.position,'" style="background-color: ').concat(r.color,'">\n            ').concat(Z.close,'\n          </div>\n          <div class="caramel-videoOverlay__inner">\n            <div id="').concat(null===(e=this.zone.banners[0])||void 0===e?void 0:e.containerId,'"></div>\n          </div>\n        </div>\n      </div>\n    ');this.zone.container&&(this.zone.container.innerHTML="",this.zone.container.insertAdjacentHTML("beforeend",i),this.element=this.zone.container.querySelector(".caramel-videoOverlay"),this.bannerElement=this.zone.container.querySelector(".caramel-videoOverlay__banner"),this.element&&this.targetElement&&this.element.appendChild(this.targetElement))},e.prototype.startCountdown=function(){var t=this,e=this.element.querySelector(".caramel-videoOverlay__close");if(this.params.canCloseAfter){e.innerHTML=this.params.canCloseAfter.toString();var n=this.params.canCloseAfter,o=setInterval((function(){0===(n-=1)?(clearInterval(o),e.innerHTML=Z.close,e.addEventListener("click",(function(){t.close()}))):e.innerHTML=n.toString()}),1e3)}else e.addEventListener("click",(function(){t.close()}))},e.prototype.show=function(){this.bannerElement.classList.add("open")},e.prototype.close=function(){var t=this;this.bannerElement.classList.remove("open"),setTimeout((function(){t.zone.banners[0].destroy(),t.bannerElement.remove()}),1e3)},e.prototype.detectPlayerType=function(){var t,e=(null===(t=this.targetElement)||void 0===t?void 0:t.outerHTML)||"";e.includes("</video>")?this.playerType=ne:e.includes("youtube.com")?this.playerType=te:e.includes("twitter.com")?this.playerType=$t:e.includes("vk.com")?this.playerType=Jt:e.includes("vimeo.com")?this.playerType=Qt:e.includes("t.me")&&(this.playerType=ee)},e.prototype.detectPlayerElement=function(){if(this.targetElement)switch(this.playerType){case ne:this.playerElement=this.getElementIfTagMatches("VIDEO");break;case te:case Jt:case Qt:case ee:this.playerElement=this.getElementIfTagMatches("IFRAME");break;case $t:this.playerElement=this.targetElement.querySelector('iframe[id^="twitter"]')}},e.prototype.getElementIfTagMatches=function(t){var e,n;return(null===(e=this.targetElement)||void 0===e?void 0:e.nodeName)===t?this.targetElement:null===(n=this.targetElement)||void 0===n?void 0:n.querySelector(t.toLowerCase())},e.prototype.initPlayerBasedOnType=function(){var t;(((t={})[ne]=this.initHtmlVideo.bind(this),t[te]=this.initYoutube.bind(this),t[$t]=this.initTwitter.bind(this),t[Jt]=this.initVk.bind(this),t[Qt]=this.initVimeo.bind(this),t[ee]=this.initTelegram.bind(this),t)[this.playerType]||this.defaultInit.bind(this))()},e.prototype.initHtmlVideo=function(){var t,e=this;this.draw(),this.callBanners(),null===(t=this.playerElement)||void 0===t||t.addEventListener("play",(function(){e.playerStarted||(e.playerStarted=!0,e.show(),e.startCountdown())}))},e.prototype.initYoutube=function(){var t=this;this.draw(!0),this.callBanners();var e=this.element.querySelector(".caramel-videoOverlay__background");if(this.bannerElement.style.pointerEvents="none",e){e.addEventListener("click",(function(){t.show(),t.startCountdown(),e.remove(),t.playerElement.setAttribute("src",t.playerElement.getAttribute("src")+(t.playerElement.getAttribute("src").includes("?")?"&autoplay=1":"?autoplay=1"))}))}},e.prototype.initTwitter=function(){this.draw(),this.callBanners(),this.detectPlayerElementOnInterval()},e.prototype.initVk=function(){this.draw(),this.callBanners(),this.detectPlayerElementOnInterval()},e.prototype.initVimeo=function(){this.draw(),this.callBanners(),this.detectPlayerElementOnInterval()},e.prototype.initTelegram=function(){this.draw(),this.callBanners(),this.detectPlayerElementOnInterval()},e.prototype.defaultInit=function(){var t,e=this;this.draw(!0),this.callBanners();var n=null===(t=this.element)||void 0===t?void 0:t.querySelector(".caramel-videoOverlay__background");null==n||n.addEventListener("click",(function(){e.show(),e.startCountdown(),n.remove()}))},e.prototype.callBanners=function(){this.zone.banners.forEach((function(t){return t.call()}))},e.prototype.detectPlayerElementOnInterval=function(){var t=this,e=setInterval((function(){t.detectPlayerElement(),t.playerElement&&(clearInterval(e),t.detectPlayerStartOnInterval())}),500)},e.prototype.detectPlayerStartOnInterval=function(){var t=this,e=setInterval((function(){if(!t.playerStarted&&document.activeElement===(null==t?void 0:t.playerElement)){if(!(/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||(n=t.playerElement,o=t.clientX,r=t.clientY,i=n.getBoundingClientRect(),o>=i.left&&o<=i.right&&r>=i.top&&r<=i.bottom)))return;clearInterval(e),t.playerStarted=!0,t.show(),t.startCountdown()}var n,o,r,i}),100)},e}(Y);const ae=function(){function t(){}return t.createFormat=function(t,e){switch(t){case r.fullscreen:return new vt(e);case r.banner:return new K(e);case r.interscroller:return new wt(e);case r.fadeInBox:return new mt(e);case r.combo:return new it(e);case r.topLine:return new Xt(e);case r.bottomLine:return new ot(e);case r.smartCatfish:return new Ct(e);case r.smartSticky:return new St(e);case r.cube:return new ct(e);case r.story:return new Lt(e);case r.videoOverlay:return new ie(e);case r.streamLine:return new Gt(e);default:return new dt(e)}},t}();var se=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ce=function(t){function e(e){var n=t.call(this,"Validation error")||this;return n.errors=e,n}return se(e,t),e}(Error);var le=function(){function t(){}return t.validate=function(t){var e=[];if((!t.params||"object"!=typeof t.params||Object.keys(t.params).length<2)&&e.push("Invalid params"),t.bidding&&t.bidding.bids.length&&t.bidding.sizes.length||e.push("Invalid bidding params"),e.length>0)throw new ce(e)},t}();const de=le;const ue=function(){function t(){}return t.validate=function(t){var e,n,o,r=[];if(window.CaramelDomain||t.domain.main&&(t.domain.main===window.location.hostname||(e=t.domain.main,n=window.location.hostname,o=e.replace(/\./g,"\\."),new RegExp("^([a-zA-Z0-9-]+\\.)*".concat(o,"$"),"i").test(n)))||r.push("Invalid domain"),r.length>0)throw new ce(r)},t}();!function(){function t(){}t.validate=function(t){var e=[];if(t.vastUrl&&"string"==typeof t.vastUrl||e.push("Invalid VAST url"),(!t.percentage||"number"!=typeof t.percentage||t.percentage<0||t.percentage>100)&&e.push("Invalid percentage"),e.length>0)throw new ce(e)}}();var pe=function(){function t(){}return t.validate=function(t){var e=[];if(t.id&&"string"==typeof t.id||e.push("Invalid ID"),t.name&&"string"==typeof t.name||e.push("Invalid name"),t.format&&"string"==typeof t.format&&Object.values(r).includes(t.format)||e.push("Invalid format"),t.params&&"object"==typeof t.params&&0!==Object.keys(t.params).length||e.push("Invalid params"),e.length>0)throw new ce(e)},t}();const me=pe;var fe=function(){return fe=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},fe.apply(this,arguments)},he=function(){function t(t,e){var n=this;this.isEmpty=!1,this.isInView=!0,this.lastWinBidderCpm=0,this.lastWinBidderName="",this.viewableTimer=null,this.viewableFired=!1,this.viewableObserver=null,de.validate(t),this.zone=e,this.stub=t.stub,this.params=t.params,this.bidding=t.bidding,this.containerId=this.getContainerId(t,e),D.get("logger")&&setInterval((function(){n.syncInfobox()}),200)}return t.prototype.getContainerId=function(t,e){var n="".concat(M,"_").concat(t.id);return e.params.isRepeatable&&(n+="_".concat(String(Math.random()).split(".")[1].slice(0,4))),n},t.prototype.call=function(t){var e,n,r,i=this;void 0===t&&(t={});var a=fe({containerId:this.containerId,params:this.params.reduce((function(t,e){var n=e.key,o=e.value;return t[n]=o,t}),{}),lazyLoad:!!this.zone.params.hasLazyLoad&&this.zone.params.lazyLoad,onClose:this.onClose.bind(this),onError:this.onError.bind(this),onLoad:this.onLoad.bind(this),onRender:this.onRender.bind(this),onStub:this.onStub.bind(this),onVideoEnd:this.onVideoEnd.bind(this)},t),c=function(){window.Caramel.EventEmitter.emit("benchmark:log",J.lap("app:init"),'Banner "'.concat(i.containerId,'" called')),i.zone.params.isAdaptive?tt.createAdaptiveBanner(a,i.zone.params.adaptiveOptions.devices,i.zone.params.adaptiveOptions.sizes):tt.createAsyncBanner(a)};if(this.zone.params.hasPushAdUnits){var l=document.getElementById(this.containerId);l&&(l.innerHTML="")}var d=Object.keys(null===(r=null===(n=null===(e=window.Caramel)||void 0===e?void 0:e.config)||void 0===n?void 0:n.adfox)||void 0===r?void 0:r.biddersMap);this.zone.params.isRepeatable||this.zone.params.hasPushAdUnits?window.Ya.adfoxCode.hbCallbacks.push((function(){window.Ya.headerBidding.pushAdUnits([fe(fe({code:i.containerId},i.zone.params.isCombo?{codeType:"combo"}:i.zone.params.isInstream?{codeType:"instream"}:i.zone.params.isInpage?{codeType:"inpage"}:{}),{sizes:i.bidding.sizes.map((function(t){return[t.width,t.height]})),bids:i.bidding.bids.filter((function(t){return t.bidder&&t.status&&H(t)})).filter((function(t){return d.includes(t.bidder)})).map((function(t){return{bidder:t.bidder,params:fe({sendTargetRef:o.includes(t.bidder)},R(t))}}))})]),c()})):c(),this.setupObservation(),this.setupViewabilityObservation(),!s.includes(this.zone.formatType)&&this.zone.params.hasAutoReload&&this.zone.params.autoReloadInterval?this.initAutoReload(t):s.includes(this.zone.formatType)||setTimeout((function(){window.Caramel.EventEmitter.emit("zone:tryToStartVideoAds",i.zone.id)}),15e3)},t.prototype.setupObservation=function(){var t=this,e=document.getElementById(this.containerId);if(e){var n=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(t.isInView=!0,window.Caramel.EventEmitter.emit("banner:viewEnter",t.containerId)):(t.isInView=!1,window.Caramel.EventEmitter.emit("banner:viewLeave",t.containerId))}))}),{threshold:.3}),o=new MutationObserver((function(n){n.forEach((function(){t.isEmpty=e.scrollHeight<x}))}));n.observe(e),o.observe(e,{childList:!0,subtree:!0,attributes:!0})}},t.prototype.setupViewabilityObservation=function(){var t,e=this,n=document.getElementById(this.containerId);if(n){null===(t=this.viewableObserver)||void 0===t||t.disconnect(),this.viewableObserver=null,null!==this.viewableTimer&&(clearTimeout(this.viewableTimer),this.viewableTimer=null),this.viewableFired=!1;this.viewableObserver=new IntersectionObserver((function(t){for(var n=0,o=t;n<o.length;n++){o[n].intersectionRatio>=.5&&!document.hidden?e.viewableFired||null===e.viewableTimer&&(e.viewableTimer=window.setTimeout((function(){e.viewableTimer=null,document.hidden||(e.viewableFired=!0,e.lastWinBidderName&&e.lastWinBidderCpm&&ke.fire({event:"view",source:e.lastWinBidderName,cpm:e.lastWinBidderCpm,site:window.location.hostname,zone:e.zone.id,format:e.zone.formatType}))}),2e3)):null!==e.viewableTimer&&(clearTimeout(e.viewableTimer),e.viewableTimer=null)}}),{threshold:[0,.5,1]}),this.viewableObserver.observe(n)}},t.prototype.initAutoReload=function(t){var e=this;setTimeout((function(){window.Caramel.EventEmitter.emit("zone:tryToStartVideoAds",e.zone.id)}),15e3),setTimeout((function(){if(e.isInView||a.includes(e.zone.formatType))e.zone.params.hasPushAdUnits?e.call(t):(e.reload(),e.initAutoReload(t));else{var n=function(o){e.containerId===o&&(e.zone.params.hasPushAdUnits?e.call(t):(e.reload(),e.initAutoReload(t)),window.Caramel.EventEmitter.removeListener("banner:viewEnter",n))};window.Caramel.EventEmitter.on("banner:viewEnter",n)}}),1e3*this.zone.params.autoReloadInterval)},t.prototype.reload=function(){var t=this;this.viewableFired=!1,null!==this.viewableTimer&&(clearTimeout(this.viewableTimer),this.viewableTimer=null),tt.reloadBanner(this.containerId),requestAnimationFrame((function(){requestAnimationFrame((function(){t.setupViewabilityObservation()}))}))},t.prototype.syncInfobox=function(){var t;if(this.zone.container&&!this.isEmpty){"static"===window.getComputedStyle(this.zone.container).position&&(this.zone.container.style.position="relative"),null===(t=this.zone.container.querySelector(".caramel-infobox"))||void 0===t||t.remove();var e=this.zone.container;"bottomLine"===this.zone.formatType?e=this.zone.container.querySelector(".caramel-bottomLine"):"topLine"===this.zone.formatType?e=this.zone.container.querySelector(".caramel-topLine"):"fadeInBox"===this.zone.formatType&&(e=this.zone.container.querySelector(".caramel-fadeInBox")),null==e||e.insertAdjacentHTML("afterbegin",'\n        <span class="caramel-infobox">\n          '.concat(this.zone.name," / ").concat(this.lastWinBidderName," ").concat(this.lastWinBidderCpm?"(".concat(this.lastWinBidderCpm," RUB)"):"","</span>\n      "))}},t.prototype.destroy=function(){var t;null===(t=this.viewableObserver)||void 0===t||t.disconnect(),this.viewableObserver=null,null!==this.viewableTimer&&(clearTimeout(this.viewableTimer),this.viewableTimer=null),tt.destroyBanner(this.containerId)},t.prototype.detectWinBidder=function(t){var e,n,o,r,i,a,s,c;if(!t)return this.lastWinBidderName=(null===(e=this.stub)||void 0===e?void 0:e.sourceType)?"".concat(null===(n=this.stub)||void 0===n?void 0:n.sourceType," Stub"):"Unknown",void(this.lastWinBidderCpm=0);var l=t.bundleName,d=t.bundleParams;if(null===(o=null==d?void 0:d.bids)||void 0===o?void 0:o.length){var u=d.bids.find((function(t){return t.campaign_id==d.campaignId}));if(u){var p=null!==(i=null===(r=tt.getLastWinnerBid(this.containerId))||void 0===r?void 0:r.cpm)&&void 0!==i?i:0;if((null===(a=this.stub)||void 0===a?void 0:a.isActive)&&(null===(s=this.stub)||void 0===s?void 0:s.cpmThreshold)&&p<(null===(c=this.stub)||void 0===c?void 0:c.cpmThreshold))return void this.renderStub();ke.fire({event:"win",source:u.bidderName,cpm:p,site:window.location.hostname,zone:this.zone.id,format:this.zone.formatType}),this.lastWinBidderName=u.bidderName,this.lastWinBidderCpm=p}}else"banner.direct"===l?(this.lastWinBidderName="",this.lastWinBidderCpm=0):(this.lastWinBidderName="Unknown",this.lastWinBidderCpm=0)},t.prototype.renderStub=function(){var t,e,n=this;if(this.stub&&(null===(t=this.stub)||void 0===t?void 0:t.isActive)){setTimeout((function(){n.detectWinBidder()}),100);var o=document.getElementById(this.containerId);o&&q(null===(e=this.stub)||void 0===e?void 0:e.code,o)}},t.prototype.onClose=function(){window.Caramel.EventEmitter.emit("banner:onClose",this)},t.prototype.onError=function(t){window.Caramel.EventEmitter.emit("banner:onError",this,t)},t.prototype.onLoad=function(t){var e=this;setTimeout((function(){e.detectWinBidder(t)}),100),window.Caramel.EventEmitter.emit("benchmark:log",J.lap("app:init"),'Banner "'.concat(this.containerId,'" loaded'),document.querySelector("#".concat(this.containerId))),window.Caramel.EventEmitter.emit("banner:onLoad",this,t)},t.prototype.onRender=function(){window.Caramel.EventEmitter.emit("benchmark:log",J.lap("app:init"),'Banner "'.concat(this.containerId,'" rendered'),document.querySelector("#".concat(this.containerId))),window.Caramel.EventEmitter.emit("banner:onRender",this)},t.prototype.onStub=function(){this.renderStub(),window.Caramel.EventEmitter.emit("banner:onStub",this)},t.prototype.onVideoEnd=function(){window.Caramel.EventEmitter.emit("banner:onStub",this)},t}();const ve=he;var ye=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},be=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},we=function(){function t(t,e,n){void 0===n&&(n=0);var o=this;this.banners=[],this.videoAds=[],this.index=0,this.isInView=!1,me.validate(t),this.id=t.id,this.name=t.name,this.container=e,this.params=t.params,this.formatType=t.format,this.formatParams=Array.isArray(t.formatParams)?{}:t.formatParams,this.format=ae.createFormat(t.format,this),this.device=t.device,this.size=t.size,this.index=n,this.canShowByFrequency()&&this.canShowForLocation()&&this.format.canShowForDevice()&&(null==t?void 0:t.banners)&&(null==t?void 0:t.banners.length)&&t.banners.forEach((function(t){try{var e=new ve(t,o);o.banners.push(e)}catch(t){window.Caramel.EventEmitter.emit("banner:validationError",t)}})),this.canShowByFrequency()&&this.canShowForLocation()&&this.format.canShowForDevice()&&(null==t?void 0:t.videoAds)&&(null==t?void 0:t.videoAds.length)&&t.videoAds.forEach((function(t){try{var e=new Dt({vastUrl:t.vastUrl,container:o.container,zone:o,source:t.source,percentage:t.percentage,wrapperStyle:"position: absolute; inset: 0; z-index: 10;"});o.videoAds.push(e)}catch(t){window.Caramel.EventEmitter.emit("videoAd:validationError",t)}})),window.Caramel.headerBiddingScriptConnected&&window.Caramel.contextScriptConnected?this.init():window.Caramel.headerBiddingScriptConnected?window.Caramel.EventEmitter.on("yandex:contextScriptConnectSuccess",this.init.bind(this)):window.Caramel.EventEmitter.on("yandex:headerBiddingScriptConnectSuccess",this.init.bind(this))}return t.prototype.init=function(){var t,e=this;window.Caramel.EventEmitter.emit("zone:init",{id:this.id,name:this.name,formatType:this.formatType,containerIds:this.banners.map((function(t){return t.containerId})).join(", ")}),this.setupObservation(),this.canShowByFrequency()&&this.canShowForLocation()&&this.format.canShowForDevice()&&(this.index?setTimeout((function(){e.format.init()}),300*this.index):this.format.init(),(null===(t=this.params)||void 0===t?void 0:t.frequency)&&V("Caramel_".concat(this.id,"_shown"),"1",this.params.frequency)),this.params.jsCode&&!document.getElementById("Caramel_".concat(this.id,"_script"))&&this.appendScript(),this.params.cssCode&&!document.getElementById("Caramel_".concat(this.id,"_style"))&&this.appendStyle(),this.params.isAdaptive&&this.params.adaptiveOptions&&!["videoOverlay","streamLine"].includes(this.formatType)&&this.format.setupResizeObservation(),this.videoAds.length&&this.setupVideoAdsObservation()},t.prototype.setupObservation=function(){var t=this;window.Caramel.EventEmitter.on("banner:viewEnter",(function(e){t.banners.some((function(t){return t.containerId===e}))&&(t.isInView=t.banners.some((function(t){return t.isInView})))})),window.Caramel.EventEmitter.on("banner:viewLeave",(function(e){t.banners.some((function(t){return t.containerId===e}))&&(t.isInView=t.banners.some((function(t){return t.isInView})))}))},t.prototype.setupVideoAdsObservation=function(){var t=this;window.Caramel.EventEmitter.on("zone:tryToStartVideoAds",(function(e){return ye(t,void 0,void 0,(function(){var t,n,o,r,i;return be(this,(function(a){switch(a.label){case 0:if(e!==this.id)return[2];this.videoAds.forEach((function(t){return t.destroy()})),t=[],this.videoAds.forEach((function(e){for(var n=1;n<=e.percentage;n++)t.push(e)})),n=function(){return t[Math.floor(Math.random()*t.length)]},o=function(e){var o;return be(this,(function(e){switch(e.label){case 0:return o=n(),window.Caramel.EventEmitter.emit("zone:tryToCallVideoAd",r,o.source),[4,o.call()];case 1:return e.sent()?[2,"break"]:(t=t.filter((function(t){return t!==o})),[2])}}))},r=this,i=0,a.label=1;case 1:return i<this.videoAds.length?[5,o(i)]:[3,4];case 2:if("break"===a.sent())return[3,4];a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))}))},t.prototype.appendScript=function(){this.scriptNode=document.createElement("script"),this.scriptNode.id="Caramel_".concat(this.id,"_script"),this.scriptNode.textContent=this.params.jsCode,document.head.appendChild(this.scriptNode)},t.prototype.appendStyle=function(){this.styleNode=document.createElement("style"),this.styleNode.id="Caramel_".concat(this.id,"_style"),this.styleNode.textContent=this.params.cssCode,this.styleNode.setAttribute("rel","stylesheet"),document.head.appendChild(this.styleNode)},t.prototype.canShowForLocation=function(){var t,e,n,o,r,i,a,s,c,l,d=!0;return(null===(e=null===(t=this.params)||void 0===t?void 0:t.allowedCountries)||void 0===e?void 0:e.length)?d=null===(r=null===(o=null===(n=this.params)||void 0===n?void 0:n.allowedCountries)||void 0===o?void 0:o.map((function(t){return t.toLowerCase()})))||void 0===r?void 0:r.includes(window.Caramel.Geo.countryCode):(null===(a=null===(i=this.params)||void 0===i?void 0:i.blockedCountries)||void 0===a?void 0:a.length)&&(d=!(null===(l=null===(c=null===(s=this.params)||void 0===s?void 0:s.blockedCountries)||void 0===c?void 0:c.map((function(t){return t.toLowerCase()})))||void 0===l?void 0:l.includes(window.Caramel.Geo.countryCode))),d},t.prototype.canShowByFrequency=function(){var t;return!(null===(t=this.params)||void 0===t?void 0:t.frequency)||!N("Caramel_".concat(this.id,"_shown"))},t}();const ge=we;const _e=function(){function t(){}return t.connectPixelIframe=function(){document.body&&(document.body.insertAdjacentHTML("beforeend",'<iframe style="display:none" async="true" src="https://ads.betweendigital.com/sspmatch-iframe?country=RU&p=42917"></iframe>'),document.body.insertAdjacentHTML("beforeend",'<iframe style="display:none" async="true" src="https://ads.betweendigital.com/sspmatch-iframe?country=RU&p=41985"></iframe>'))},t}();const Ce=function(){function t(){}return t.connectPixelImage=function(){document.body&&document.body.insertAdjacentHTML("beforeend",'<img loading="lazy" style="visibility: hidden; width: 1px; height: 1px; position: absolute; left: -9999px;" src="https://ssp.bidvol.com/usersync?chain=142,80,14,226,42">')},t}();const Ee=function(){function t(){}return t.connectScript=function(){L.appendElement("script",{src:"https://tube.buzzoola.com/js/lib/buzzoola_ext.js"},"head")},t}();!function(){function t(){}t.connectPixelScript=function(){L.appendElement("script",{src:"https://sync.dmp.otm-r.com/match/aotm.js",async:"true"},"head")}}();const xe=function(){function t(){}return t.connectManagerScript=function(){L.appendElement("script",{src:"https://cdn.skcrtxr.com/roxot-wrapper/js/roxot-manager.js?pid=19e08d82-9ec3-4dda-b15f-01ab2c95e167"},"head")},t}();const Se=function(){function t(){}return t.connectPixelScript=function(){var t=document.createElement("script");t.textContent='\n      var dfwjbfVbvgUFIUopho = window;\n      if (!Object.prototype.hasOwnProperty.call(dfwjbfVbvgUFIUopho, \'_acic\') || typeof window._acic !== \'object\') {\n        var _acic={dataProvider: 14,publisherId: 1753819};(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src="https://www.acint.net/aci.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()\n      }\n    ',document.head.appendChild(t)},t.connectMatchingScript=function(){var t=document.createElement("script");t.src="https://cdn-rtb.sape.ru/js/uids.js",t.async=!0,document.head.appendChild(t),t.onload=function(){document.cookie="caramel_sapeRrbFpUids=".concat(encodeURIComponent(JSON.stringify(window.sapeRrbFpUids)),"; path=/; max-age=21600")}},t.getRrbFpUids=function(){var t,e=null===(t=document.cookie.split("; ").find((function(t){return t.startsWith("caramel_sapeRrbFpUids=")})))||void 0===t?void 0:t.split("=")[1];return e?JSON.parse(decodeURIComponent(e)):window.sapeRrbFpUids?window.sapeRrbFpUids:[]},t}();const Ae=function(){function t(){}return t.init=function(t){this.configure(t),this.connectScript()},t.configure=function(t){window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.que.push((function(){window.pbjs.setConfig({enableTIDs:!0,userSync:{iframeEnabled:!0,pixelEnabled:!0,filterSettings:{iframe:{bidders:this.getBidders(t),filter:"include"},image:{bidders:this.getBidders(t),filter:"include"}}},activityControls:[{activity:"transmitTid",allow:this.getBidders(t)}]})}))},t.connectScript=function(){var t=L.appendElement("script",{async:"true",src:"https://cdn.digitalcaramel.com/prebid.js"},"head");t.onload=function(){window.Caramel.EventEmitter.emit("prebid:prebidScriptConnectSuccess")},t.onerror=function(){window.Caramel.EventEmitter.emit("prebid:prebidScriptConnectError")}},t.getBidders=function(t){return t.adfox.biddersMap?Object.keys(t.adfox.biddersMap).filter((function(t){return t.startsWith("pb_")})).map((function(t){return t.substring(3)})):[]},t}();var Ie=function(){return Ie=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ie.apply(this,arguments)},Le=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Te=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const ze=function(){function t(){this.zones=[]}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.init=function(t){ue.validate(t),this.config=t,this.hasPrebid()&&Ae.init(this.config),tt.connectHeaderBiddingScript(),tt.initQueues(),this.initZones(),(this.config.zones.some((function(t){var e;return null===(e=null==t?void 0:t.videoAds)||void 0===e?void 0:e.length}))||this.config.zones.some((function(t){return"streamLine"===t.format})))&&this.connectVideoSDK(),this.connectBidderScripts(),tt.setupHeaderBiddingSettings(Array.isArray(t.adfox.biddersMap)?{}:t.adfox.biddersMap,t.adfox.biddersCpmAdjustmentMap,this.getAdUnits(),t.adfox.timeout,this.hasPrebid()),tt.connectContextScript()},t.prototype.initZones=function(){return Le(this,void 0,void 0,(function(){var t=this;return Te(this,(function(e){switch(e.label){case 0:return n=t.config.zones.some((function(t){var e,n,o,r;return(null===(n=null===(e=t.params)||void 0===e?void 0:e.allowedCountries)||void 0===n?void 0:n.length)||(null===(r=null===(o=t.params)||void 0===o?void 0:o.blockedCountries)||void 0===r?void 0:r.length)})),o=t.config.zones.some((function(t){var e,n;return t.format===r.streamLine&&(null===(n=null===(e=t.formatParams)||void 0===e?void 0:e.blocks)||void 0===n?void 0:n.some((function(t){var e,n;return(null===(e=null==t?void 0:t.allowedCountries)||void 0===e?void 0:e.length)||(null===(n=null==t?void 0:t.blockedCountries)||void 0===n?void 0:n.length)})))})),n||o?[4,this.detectLocation()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.config.zones.forEach((function(e){"canceled"!==e.status&&("pending"!==e.status||"#caramel_preview"===window.location.hash||new URLSearchParams(window.location.search).has("caramel_preview")||D.get("logger"))&&(e.params.hasCssPath&&(t.insertInitialElements(e),i.includes(e.format)&&t.observeDynamicElements(e)),t.initZone(e),t.observeZoneContainers(e))})),[2]}var n,o}))}))},t.prototype.initZone=function(t){var e=this;if(t.params.isRepeatable){Array.from(document.querySelectorAll('[caramel-id="'.concat(t.id,'"]'))).forEach((function(n,o){e.createZone(t,n,o)}))}else{var n=document.querySelector('[caramel-id="'.concat(t.id,'"]'));n&&this.createZone(t,n)}},t.prototype.insertInitialElements=function(t){var e,n=Array.from(document.querySelectorAll(null===(e=t.params)||void 0===e?void 0:e.cssPath.targetSelector));this.canInsertZoneForDevice(t)&&n.forEach((function(e){var n;e.insertAdjacentHTML(null===(n=t.params)||void 0===n?void 0:n.cssPath.placement,'<div caramel-id="'.concat(t.id,'"></div>'))}))},t.prototype.canInsertZoneForDevice=function(t){if(!t.params.isAdaptive)return!0;var e,n=t.params.adaptiveOptions.sizes;return e=window.innerWidth>n.tabletWidth?"desktop":window.innerWidth<=n.tabletWidth&&window.innerWidth>n.phoneWidth?"tablet":"phone",t.params.adaptiveOptions.devices.includes(e)},t.prototype.observeDynamicElements=function(t){var e=new MutationObserver((function(e){for(var n=0,o=e;n<o.length;n++){var r=o[n];"childList"===r.type&&Array.from(r.addedNodes).forEach((function(e){var n,o;(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE&&e.matches(null===(n=t.params)||void 0===n?void 0:n.cssPath.targetSelector)&&e.insertAdjacentHTML(null===(o=t.params)||void 0===o?void 0:o.cssPath.placement,'<div caramel-id="'.concat(t.id,'"></div>'))}))}}));"loading"===document.readyState?document.body?e.observe(document.body,{childList:!0,subtree:!0}):document.addEventListener("DOMContentLoaded",(function(){e.observe(document.body,{childList:!0,subtree:!0})})):e.observe(document.body,{childList:!0,subtree:!0})},t.prototype.observeZoneContainers=function(t){var e=this,n=new MutationObserver((function(n){for(var o=0,r=n;o<r.length;o++){var i=r[o];"childList"===i.type&&Array.from(i.addedNodes).forEach((function(n){if((null==n?void 0:n.nodeType)===Node.ELEMENT_NODE){var o="DIV"===(null==n?void 0:n.tagName)&&(null==n?void 0:n.getAttribute("caramel-id"))===t.id,r=!!n.querySelector('[caramel-id="'.concat(t.id,'"]')),i=e.zones.some((function(e){return e.id===t.id}));if(o||r){if(!t.params.isRepeatable&&i){var a=e.zones.find((function(e){return e.id===t.id}));a&&a.container.remove()}var s=o?n:n.querySelector('[caramel-id="'.concat(t.id,'"]'));e.createZone(t,s)}}}))}}));"loading"===document.readyState?document.body?n.observe(document.body,{childList:!0,subtree:!0}):document.addEventListener("DOMContentLoaded",(function(){n.observe(document.body,{childList:!0,subtree:!0})})):n.observe(document.body,{childList:!0,subtree:!0})},t.prototype.getAdUnits=function(){var t=this.config.zones;"#caramel_preview"===window.location.hash||new URLSearchParams(window.location.search).has("caramel_preview")||D.get("logger")||(t=t.filter((function(t){return"approved"===t.status})));var e=Object.keys(this.config.adfox.biddersMap);return t.flatMap((function(t){return t.banners.flatMap((function(n){return Ie(Ie({code:"Caramel_".concat(n.id)},t.params.isCombo?{codeType:"combo"}:t.params.isInstream?{codeType:"instream"}:t.params.isInpage?{codeType:"inpage"}:{}),{bids:n.bidding.bids.filter((function(t){return t.bidder&&t.status&&H(t)})).filter((function(t){return e.includes(t.bidder)})).map((function(t){return{bidder:t.bidder,params:Ie(Ie(Ie(Ie({sendTargetRef:o.includes(t.bidder)},R(t)),"mediasniper"===t.bidder?{additional:{ext:{luid:localStorage.getItem("tf_lid")}}}:{}),"buzzoola"===t.bidder?{additional:{fpuids:function(){try{return window.Buzzoola.User.getAllData()}catch(t){return{}}}()}}:{}),"sape"===t.bidder?{additional:{sapeFpUids:Se.getRrbFpUids()}}:{})}})),sizes:n.bidding.sizes.map((function(t){return[t.width,t.height]}))})}))}))},t.prototype.createZone=function(t,e,n){void 0===n&&(n=0);try{var o=new ge(t,e,n);this.zones.push(o)}catch(t){window.Caramel.EventEmitter.emit("zone:validationError",t)}},t.prototype.connectBidderScripts=function(){this.bidderExists("roxot")&&xe.connectManagerScript(),this.bidderExists("betweendigital")&&_e.connectPixelIframe(),this.bidderExists("sape")&&(Se.connectPixelScript(),Se.connectMatchingScript()),this.bidderExists("bidvol")&&Ce.connectPixelImage(),this.bidderExists("buzzoola")&&Ee.connectScript()},t.prototype.bidderExists=function(t){return Object.keys(this.config.adfox.biddersMap).includes(t)},t.prototype.hasPrebid=function(){var t=Object.keys(this.config.adfox.biddersMap).some((function(t){return t&&t.startsWith("pb_")})),e=this.config.zones.filter((function(t){return"canceled"!==t.status})).some((function(t){return t.banners.some((function(t){return t.bidding.bids.some((function(t){return t.status&&t.bidder&&t.bidder.startsWith("pb_")&&H(t)}))}))}));return t&&e},t.prototype.connectVideoSDK=function(){var t=L.appendElement("script",{src:"https://yandex.ru/ads/system/adsdk.js",async:"true"},"head");t.onerror=function(){window.Caramel.EventEmitter.emit("videoSDK:connectError")},t.onload=function(){window.Caramel.EventEmitter.emit("videoSDK:connectSuccess")}},t.prototype.detectLocation=function(){return Le(this,void 0,void 0,(function(){var t,e,n,o,r,i;return Te(this,(function(a){switch(a.label){case 0:if(t=null===(i=document.cookie.split("; ").find((function(t){return t.startsWith("caramel_geo=")})))||void 0===i?void 0:i.split("=")[1])return window.Caramel.Geo=JSON.parse(decodeURIComponent(t)),window.Caramel.EventEmitter.emit("debug","Cached country code is: ".concat(window.Caramel.Geo.countryCode)),[2];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch("https://api.country.is/")];case 2:return[4,a.sent().json()];case 3:if(!(e=a.sent()))throw new Error("Failed to retrieve location data");return n=e.country,o={countryCode:n.toLowerCase()},window.Caramel.Geo=o,window.Caramel.EventEmitter.emit("debug","Detected country code is: ".concat(window.Caramel.Geo.countryCode)),document.cookie="caramel_geo=".concat(encodeURIComponent(JSON.stringify(o)),"; path=/; max-age=10800"),[3,5];case 4:return r=a.sent(),console.error("Error detecting location:",r),[3,5];case 5:return[2]}}))}))},t}().getInstance();const ke=function(){function t(){}return t.fire=function(e){if(t.ALLOWED_HOSTS.includes(window.location.hostname)){var n=t.BASE_SRC,o=new URLSearchParams;Object.keys(e).forEach((function(t){var n=e[t];null!=n&&o.append(t,String(n))}));var r=o.toString();r&&(n+="?".concat(r)),(new Image).src=n}},t.BASE_SRC="https://metrics.digitalcaramel.com/pixel.gif",t.ALLOWED_HOSTS=["reshak.ru","gdz.ru","readli.net","smotret.tv","adme.media","akniga.org","fdating.com","4ege.ru","anime-bit.ru","reshalka.com"],t}();var Oe=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((o=o.apply(t,e||[])).next())}))},Be=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};(function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.init=function(){window.Caramel={EventEmitter:S.getInstance(),headerBiddingScriptConnected:!1,contextScriptConnected:!1,Geo:{countryCode:""}},J.start("app:init"),j.getInstance().init(),this.connectWebsiteConfig()},t.prototype.connectWebsiteConfig=function(){return Oe(this,void 0,void 0,(function(){var t;return Be(this,(function(e){try{t=window.CaramelDomain||window.location.hostname.replace(/^www\./,""),fetch("".concat("https://cdn.digitalcaramel.com/configs","/").concat(t,".json").concat("#caramel_preview"===window.location.hash||D.get("logger")?"?ts=".concat((new Date).getTime()):"")).then((function(t){return t.json()})).then((function(t){try{ze.init(t)}catch(t){window.Caramel.EventEmitter.emit("config:validationError",t)}window.Caramel.config=t,window.Caramel.EventEmitter.emit("app:websiteConfigConnectSuccess",t)}))}catch(t){window.Caramel.EventEmitter.emit("app:websiteConfigConnectError")}return[2]}))}))},t})().getInstance().init()})();